<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Cauil&#39;s Blog">
<meta property="og:url" content="http://cauil.github.io/page/2/index.html">
<meta property="og:site_name" content="Cauil&#39;s Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cauil&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://cauil.github.io/page/2/"/>





  <title>Cauil's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Cauil's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">é™Œä¸ŠèŠ±å¼€ï¼Œå¯ç¼“ç¼“å½’çŸ£</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2017/10/19/2017-10-19-mongo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/19/2017-10-19-mongo/" itemprop="url">mongo</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-10-19T00:00:00+08:00">
                2017-10-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sql/" itemprop="url" rel="index">
                    <span itemprop="name">sql</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="what-is-mongo"><a href="#what-is-mongo" class="headerlink" title="what is mongo"></a>what is mongo</h2><p>MongoDB is  NoSQL database, NoSQL = not only sql.</p>
<p>And from wikipedia:</p>
<p><code>The term NoSQL was used by Carlo Strozzi in 1998 to name his lightweight, Strozzi NoSQL open-source relational database that did not expose the standard Structured Query Language (SQL) interface, but was still relational.[16] His NoSQL RDBMS is distinct from the circa-2009 general concept of NoSQL databases. Strozzi suggests that, because the current NoSQL movement &quot;departs from the relational model altogether, it should therefore have been called more appropriately &#39;NoREL&#39;,[17] referring to &#39;No Relational&#39;.</code></p>
<p>MongoDB is document database:</p>
<ul>
<li>not .PDF or .DOC/.DOCX</li>
<li>is a associative array</li>
<li>document == json object</li>
<li>document == php array</li>
<li>document == python dict</li>
<li>document == ruby hash</li>
</ul>
<h2 id="Why-mongo"><a href="#Why-mongo" class="headerlink" title="Why mongo"></a>Why mongo</h2><ul>
<li>flexible schema</li>
<li>oriented toward programmers</li>
<li>flexible deployment</li>
<li>designed for big data</li>
</ul>
<h2 id="Install-mongo"><a href="#Install-mongo" class="headerlink" title="Install mongo"></a>Install mongo</h2><p>mac: <code>brew intall mongo</code></p>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>We can use PyMongo to communicate with mongo in python.</p>
<p>Use <code>pip install PyMongo</code> command to install PyMongo.</p>
<p>And:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">from pymongo import MongoClient</div><div class="line">client = MongoClient(&apos;localhost:27017&apos;)</div><div class="line">db = client[db_name]</div></pre></td></tr></table></figure>
<p>So now we can use db to read/create/update/delete the data.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2017/10/10/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-10-10T23:04:28+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2017/10/01/2017-10-01-ä»å°ºå¯¸å•ä½åˆ°ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/01/2017-10-01-ä»å°ºå¯¸å•ä½åˆ°ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ/" itemprop="url">ä»å°ºå¯¸å•ä½åˆ°ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-10-01T00:00:00+08:00">
                2017-10-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="csså°ºå¯¸å•ä½"><a href="#csså°ºå¯¸å•ä½" class="headerlink" title="csså°ºå¯¸å•ä½"></a>csså°ºå¯¸å•ä½</h2><h4 id="ç»å¯¹å•ä½"><a href="#ç»å¯¹å•ä½" class="headerlink" title="ç»å¯¹å•ä½"></a>ç»å¯¹å•ä½</h4><p>åœ¨å¹³å¸¸çš„å‰ç«¯å¼€å‘ä¸­ï¼Œåœ¨å¾ˆå¤šåœ°æ–¹å†™cssçš„æ—¶å€™ï¼Œä½ éƒ½ä¼šç”¨åˆ°é•¿åº¦å°ºå¯¸å•ä½ï¼Œå¯èƒ½æœ€å…¸å‹çš„ä»£è¡¨å°±æ˜¯pxï¼›<br>å…¶å®è¿™äº›å•ä½ä¸»è¦åˆ†ä¸¤ç±»ï¼Œç»å¯¹å•ä½å’Œç›¸å¯¹å•ä½ï¼›pxå°±å±äºç»å¯¹å•ä½ï¼Œé™¤äº†pxä¹‹å¤–ï¼Œå…¶ä»–çš„ä½ å¯èƒ½éƒ½å¾ˆ<br>å°‘ä½¿ç”¨,å¦‚ä¸‹ï¼š</p>
<ul>
<li>mm, cm, in: æ¯«ç±³ï¼ˆMillimetersï¼‰ï¼Œå˜ç±³ï¼ˆcentimetersï¼‰ï¼Œè‹±å¯¸ï¼ˆinchesï¼‰</li>
<li>pt, pc: ç‚¹ï¼ˆPoints (1/72 of an inch)ï¼‰ï¼Œ åäºŒç‚¹æ´»å­—ï¼ˆ picas (12 points.)ï¼‰</li>
</ul>
<h4 id="ç›¸å¯¹å•ä½"><a href="#ç›¸å¯¹å•ä½" class="headerlink" title="ç›¸å¯¹å•ä½"></a>ç›¸å¯¹å•ä½</h4><p>ä¸Šé¢åˆ—ä¸¾çš„ä¸»è¦æ˜¯ç»å¯¹å•ä½ï¼Œé‚£ç›¸å¯¹å•ä½æ˜¯å•¥å‘¢ï¼Œé¡¾åæ€ä¹‰ï¼Œç›¸å¯¹å•ä½å°±æ˜¯åŸºäºæŸäº›å‚è€ƒç‰©çš„å•ä½ï¼›ä¸»è¦æœ‰ï¼š</p>
<ul>
<li>ex, ch: åˆ†åˆ«æ˜¯å°å†™xçš„é«˜åº¦å’Œæ•°å­—0çš„å®½åº¦ï¼›</li>
<li>em, rem: emå’Œreméƒ½æ˜¯åŸºäº<code>font-size</code>çš„å•ä½ï¼Œä½†åˆæœ‰æ‰€ä¸åŒï¼Œemæ˜¯åŸºäºå½“å‰å…ƒç´ çš„<code>font-size</code>ä¸ºå‚è€ƒç‰©<br>çš„(å¦‚æœå½“å‰font-sizeæ²¡æœ‰è®¾ç½®ï¼Œå°±åŸºäºçˆ¶å…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨); remæ˜¯åŸºäºæ ¹å…ƒç´ ä¸ºå‚è€ƒç‰©ï¼Œå¦‚æœæ ¹å…ƒç´ æ²¡æœ‰è®¾ç½®ï¼Œ<br>å¤§å¤šæ•°æµè§ˆå™¨é»˜è®¤ä¸º16pxï¼›å‡å¦‚å‚è€ƒç‰©çš„<code>font-size: 20px</code>, é‚£ä¹ˆ<code>1em=20px</code>, <code>1.5rem=30px</code>;</li>
<li>vw, vh, vmin, vmax: è¿™ç»„å•ä½éƒ½æ˜¯åŸºäºè§†å£ä¸ºå‚è€ƒç‰©ï¼ŒvwåŸºäºè§†å£çš„å®½åº¦ï¼ŒvhåŸºäºè§†å£çš„é«˜åº¦ï¼Œvmin=min(vw, vh),<br>vmax=max(vw,vh)</li>
</ul>
<h2 id="åœ¨ç§»åŠ¨ç«¯çš„ä½¿ç”¨"><a href="#åœ¨ç§»åŠ¨ç«¯çš„ä½¿ç”¨" class="headerlink" title="åœ¨ç§»åŠ¨ç«¯çš„ä½¿ç”¨"></a>åœ¨ç§»åŠ¨ç«¯çš„ä½¿ç”¨</h2><p>ç›®å‰å¸‚é¢çš„æ‰‹æœºå“ç±»ç¹å¤šï¼Œå±å¹•åˆ†è¾¨ç‡ä¹Ÿå„æœ‰ä¸åŒï¼Œå¯¼è‡´ç§»åŠ¨ç«¯å¼€å‘éš¾åº¦åŠ å¤§ï¼Œæˆ‘ä»¬æ€ä¹ˆå¼€å‘æ¥é€‚é…ä¸åŒçš„æ‰‹æœºï¼Ÿ</p>
<h4 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h4><p>ä»¥iphoneä¸‰ç§å°ºå¯¸æ‰‹æœºä¸ºä¾‹: iphone4(320px),iphone6(375px),iphone6 plus(414px);</p>
<p>æ™®é€šçš„åšæ³•æ˜¯æ ¹æ®ä¸åŒæ¯”ä¾‹çš„å°ºå¯¸æ¥ç­‰æ¯”ä¾‹<br>ç¼©æ”¾ï¼Œä¾‹å¦‚iphone4æ–‡æœ¬å¤§å°æ˜¯12pxï¼Œé‚£ä¹ˆiphone6å°±æ˜¯<code>ï¼ˆ375/320*12px=14pxï¼‰</code>,iphone6 pluså°±æ˜¯<code>ï¼ˆ414/320*12px=15.5pxï¼‰</code>;</p>
<p>æœ€å¼€å§‹çš„æ–¹æ³•ï¼š ä»¥ä¸€æ¬¾å°ºå¯¸åšä¸€ç‰ˆæ ·å¼ï¼Œç„¶åç”¨jså»æ§åˆ¶viewpointçš„intial-scale(ç½‘é¡µç¼©æ”¾æ¯”ä¾‹); å¤©çŒ«æœ€åˆç«™ç‚¹å°±æ˜¯ç”¨è¿™ç§<br>æ–¹æ³•æ¥è¿›è¡Œç§»åŠ¨ç«¯çš„å¼€å‘çš„ï¼Œè¿™æ ·æœ‰äº›ä¸å¥½çš„åœ°æ–¹ï¼Œå¦‚æ‰‹æœºä¸ºå¤§å±å¹•çš„æ—¶å€™å›¾ç‰‡æ–‡å­—ä¼šæ‹‰ä¼¸ï¼Œå¯¼è‡´é¡µé¢æ¨¡ç³Š,åœ¨æŸäº›å¸ƒå±€åœ¨ä¸åŒ<br>å°ºå¯¸çš„å±å¹•ä¹Ÿæœ‰å¯èƒ½å¯¼è‡´å¸ƒå±€é”™ä¹±ï¼›</p>
<p>ä¸ºäº†æœ€å¥½çš„é€‚é…ä¸åŒçš„æ‰‹æœºå°ºå¯¸ï¼Œç›®å‰æœ€æ™®éçš„åšæ³•å°±æ˜¯åº”ç”¨åˆ°ä¸Šä¸€èŠ‚è¯´åˆ°çš„ç›¸å¯¹å•ä½rem; </p>
<h4 id="å…¼å®¹æ€§"><a href="#å…¼å®¹æ€§" class="headerlink" title="å…¼å®¹æ€§"></a>å…¼å®¹æ€§</h4><p>å…ˆæ¥çœ‹çœ‹remçš„å…¼å®¹æ€§ï¼š</p>
<p><img src="/images/caniuse.png" alt="caniuse"></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºå…¼å®¹æ€§è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œå¤§éƒ¨åˆ†å¸‚é¢ä¸Šä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒ,æˆ‘ä»¬å¯ä»¥æ¯”è¾ƒæ”¾å¿ƒçš„ä½¿ç”¨ï¼›</p>
<p>remå®˜æ–¹æ–‡æ¡£ä¸Š<a href="https://www.w3.org/TR/css3-values/#remçš„è§£é‡Šæ˜¯ï¼š" target="_blank" rel="external">https://www.w3.org/TR/css3-values/#remçš„è§£é‡Šæ˜¯ï¼š</a></p>
<p><i>rem unit</i></p>
<p><code>rem unit
Equal to the computed value of font-size on the root element. When specified on the font-size property of the root element, the rem units refer to the propertyâ€™s initial value.</code></p>
<p>å®é™…å°±æ˜¯æ ¹æ®æ ¹å…ƒç´ æ¥è®¾ç½®å­—ä½“å¤§å°ï¼Œç„¶åå…¶ä»–è®¾ç½®äº†remå•ä½çš„å°±æ˜¯åˆ©ç”¨è¿™ä¸ªæ¥è¿›è¡ŒåŒç­‰çš„å˜æ¢ï¼›</p>
<h2 id="é€‚é…å®ç°æ–¹æ¡ˆ"><a href="#é€‚é…å®ç°æ–¹æ¡ˆ" class="headerlink" title="é€‚é…å®ç°æ–¹æ¡ˆ"></a>é€‚é…å®ç°æ–¹æ¡ˆ</h2><h4 id="æ–¹æ¡ˆ1-åŠ¨æ€æ·»åŠ htmlæ ·å¼"><a href="#æ–¹æ¡ˆ1-åŠ¨æ€æ·»åŠ htmlæ ·å¼" class="headerlink" title="æ–¹æ¡ˆ1 - åŠ¨æ€æ·»åŠ htmlæ ·å¼"></a>æ–¹æ¡ˆ1 - åŠ¨æ€æ·»åŠ htmlæ ·å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(function() &#123;</div><div class="line">   var b = document.documentElement;</div><div class="line">   var a = document.createElement(&quot;style&quot;);</div><div class="line">   a.innerHTML = &quot;html &#123; font-size: &quot; + ((b.clientWidth &gt; 640 ? 640 : b.clientWidth) / 18.75) + &quot;px !important; &#125;&quot;;</div><div class="line">   b.firstElementChild.appendChild(a)</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<h4 id="æ–¹æ¡ˆ2-åˆ©ç”¨media-queryæ¥è®¾ç½®"><a href="#æ–¹æ¡ˆ2-åˆ©ç”¨media-queryæ¥è®¾ç½®" class="headerlink" title="æ–¹æ¡ˆ2 - åˆ©ç”¨media queryæ¥è®¾ç½®"></a>æ–¹æ¡ˆ2 - åˆ©ç”¨media queryæ¥è®¾ç½®</h4><p>åˆ©ç”¨cssçš„media queryä¹Ÿæ˜¯å¯ä»¥æ¥å®ç°font-sizeçš„è®¾ç½®ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@media (min-device-width : 375px) and (max-device-width : 667px) and (-webkit-min-device-pixel-ratio : 2)&#123;</div><div class="line">      html&#123;font-size: 37.5px;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ–¹æ¡ˆ3-jsåŠ¨æ€è®¾ç½®"><a href="#æ–¹æ¡ˆ3-jsåŠ¨æ€è®¾ç½®" class="headerlink" title="æ–¹æ¡ˆ3 - jsåŠ¨æ€è®¾ç½®"></a>æ–¹æ¡ˆ3 - jsåŠ¨æ€è®¾ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">document.getElementsByTagName(&apos;html&apos;)[0].style.fontSize = window.innerWidth / 10 + &apos;px&apos;;</div></pre></td></tr></table></figure>
<h2 id="remè§£å†³æ–¹æ¡ˆå‡çº§"><a href="#remè§£å†³æ–¹æ¡ˆå‡çº§" class="headerlink" title="remè§£å†³æ–¹æ¡ˆå‡çº§"></a>remè§£å†³æ–¹æ¡ˆå‡çº§</h2><p>ä¸Šé¢å‡ ä¸ªæ–¹æ¡ˆæˆ‘ä»¬å°±å®ç°äº†åŠ¨æ€è®¾ç½®font-sizeå¹¶æ ¹æ®remå®ç°ç§»åŠ¨ç«¯ä¸åŒå°ºå¯¸çš„é€‚é…ï¼›</p>
<p>ä½†é€‚ç”¨remçš„æ–¹æ¡ˆè¿˜æ˜¯æœ‰ä¸è¶³çš„åœ°æ–¹çš„ï¼š</p>
<ol>
<li><p>å¤§å±å¹•ä¼¸ç¼©ä¹‹åå¯èƒ½å¯¼è‡´é¡µé¢æ¨¡ç³Š</p>
</li>
<li><p>è®¾è®¡ç¨¿é‡Œé¢çš„pxéƒ½è¦è½¬æ¢æˆrem</p>
</li>
</ol>
<p>å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿ</p>
<p>æä¾›é«˜åˆ†è¾¨ç‡è®¾è®¡ç¨¿ï¼Œä¸€èˆ¬é‡‡ç”¨çš„æ˜¯å®½åº¦ä¸º750pxçš„è®¾è®¡ç¨¿ï¼Œåˆšå¥½æ˜¯375çš„ä¸¤å€ï¼Œå¹¶åˆ©ç”¨sasså®ç°ä¸€ä¸ªå‡½æ•°åŠŸèƒ½<br>ä¸ºæä¾›ç›´æ¥pxåˆ°remçš„è½¬æ¢;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@function px2rem($px)&#123;</div><div class="line">    $rem : 75px;</div><div class="line">    @return ($px/$rem) + rem;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è®¾ç½®åŸºå‡†font-sizeä¸º75ï¼Œä¼ å…¥å‚æ•°pxå¤§å°ç›´æ¥è®¡ç®—å‡ºremçš„å¤§å°ï¼›</p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®Œå…¨æŒ‰ç…§è§†è§‰ç¨¿ä¸Šçš„å°ºå¯¸æ¥äº†, ä¸ç”¨é™¤äº2äº†ï¼Œå°±è§£å†³äº†å›¾ç‰‡é«˜æ¸…é—®é¢˜ï¼Œå¹¶ä¸”ä¸ç”¨æ‰‹åŠ¨è½¬æ¢å•ä½ï¼›</p>
<p>ä¸è¿‡remä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä¹Ÿè¿˜æ˜¯å…·æœ‰ä¸è¶³ä¹‹å¤„çš„,å¦‚ï¼š</p>
<ol>
<li><p>ä¸€ä¸ªAppé‡Œnativeç•Œé¢å’ŒWebç•Œé¢æ··åˆä½¿ç”¨æ—¶ï¼Œremåœ¨ä¸åŒå°ºå¯¸å±å¹•ä¸Šçš„é€‚é…ä¸nativeç•Œé¢é€‚é…ä¸ä¸€è‡´;</p>
</li>
<li><p>remåœ¨å¤šå±å¹•å°ºå¯¸é€‚é…ä¸Šä¸å½“å‰ä¸¤å¤§å¹³å°çš„è®¾è®¡å“²å­¦ä¸ä¸€è‡´, æœ‰äº›å¹¶ä¸æ˜¯ç†æƒ³çš„æŒ‰ç…§ä¸åŒå¤§å°è¿›è¡Œç­‰æ¯”ä¾‹ç¼©æ”¾ï¼›</p>
</li>
</ol>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡æˆ‘ä»¬ä¸€å¼€å§‹å…ˆè®²äº†csså°ºå¯¸å•ä½ï¼ŒåŒ…æ‹¬ç»å¯¹å•ä½ä¸ç›¸å¯¹å•ä½ï¼Œå¹¶è¯¦ç»†è®²è¿°äº†emå’Œremï¼›æ¥ä¸‹æ¥è®²è¿°äº†remåœ¨ç°ä»£<br>ç§»åŠ¨ç«¯å¼€å‘çš„åº”ç”¨ï¼Œæœ€åè®²è¿°äº†remçš„å‡ ç§åº”ç”¨æ–¹æ¡ˆä¸ä¸è¶³ä¹‹å¤„ï¼›</p>
<p>æœ€åç¥å¤§å®¶åŒèŠ‚å¿«ä¹ï¼Œç¥–å›½è¶Šæ¥è¶Šå¼ºå¤§ï¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2017/09/07/2017-09-07-è°ˆè°ˆéå†ä¸è¿­ä»£åè®®/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/07/2017-09-07-è°ˆè°ˆéå†ä¸è¿­ä»£åè®®/" itemprop="url">è°ˆè°ˆéå†ä¸è¿­ä»£åè®®</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-09-07T00:00:00+08:00">
                2017-09-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="è°ˆè°ˆéå†ä¸è¿­ä»£"><a href="#è°ˆè°ˆéå†ä¸è¿­ä»£" class="headerlink" title="è°ˆè°ˆéå†ä¸è¿­ä»£"></a>è°ˆè°ˆéå†ä¸è¿­ä»£</h1><p>å…¶å®éå†ä¸è¿­ä»£æ˜¯æ„ä¹‰å¾ˆè¿‘çš„ä¸€ç»„è¯ï¼Œä½†ä¸ºå•¥è¦è¦æŠŠå®ƒä»¬éƒ½åˆ—å‡ºæ¥å‘¢ï¼Ÿå…ˆè¦ä»éå†è¯´èµ·ï¼š</p>
<h2 id="éå†åœ¨jsä¸­çš„å½¢å¼"><a href="#éå†åœ¨jsä¸­çš„å½¢å¼" class="headerlink" title="éå†åœ¨jsä¸­çš„å½¢å¼"></a>éå†åœ¨jsä¸­çš„å½¢å¼</h2><h4 id="The-for-loop"><a href="#The-for-loop" class="headerlink" title="The for loop"></a>The for loop</h4><p><code>for</code>å¾ªç¯æ˜¯æœ€æ™®éçš„éå†æ–¹å¼, ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ —å­ï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">const digits = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];</div><div class="line"></div><div class="line">for (let i = 0; i &lt; digits.length; i++) &#123;</div><div class="line">  console.log(digits[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>forå¾ªç¯çš„ä¸è¶³ä¹‹å¤„å°±æ˜¯å¿…é¡»ç»´æŠ¤è®¡æ•°å™¨iä¸é€€å‡ºæ¡ä»¶<code>digits.length</code>, å¯¹åˆšå­¦ä¹ ç¼–ç¨‹çš„äººæ¥è¯´ï¼Œ<br>è¿™å¯èƒ½æœ‰ç‚¹å›°æƒ‘ï¼Œä¸èƒ½ä¸€çœ¼çœ‹å‡ºè¿™æ˜¯åœ¨åšå•¥ï¼›</p>
<p>è¿˜æœ‰ä¸€ç‚¹æ˜¯<code>for</code>å¾ªç¯å¾ˆé€‚åˆæ•°ç»„ç±»å‹ï¼Œä½†æ˜¯<code>js</code>ä¸åªæ˜¯åªæœ‰æ•°ç»„ç±»å‹ï¼Œå› æ­¤<code>for</code>å¾ªç¯ä¸æ˜¯ä¸€ä¸ªæ‰€æœ‰ç±»å‹çš„è§£å†³æ–¹æ¡ˆ.</p>
<h4 id="The-forâ€¦in-loop"><a href="#The-forâ€¦in-loop" class="headerlink" title="The forâ€¦in loop"></a>The forâ€¦in loop</h4><p><code>for...in</code>å¾ªç¯ä¼˜åŒ–äº†forå¾ªç¯çš„ä¸è¶³ä¹‹å¤„-éœ€è¦ç»´æŠ¤è®¡æ•°å™¨çš„å˜åŒ–ä¸é€€å‡ºæ¡ä»¶ï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">const digits = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];</div><div class="line"></div><div class="line">for (const index in digits) &#123;</div><div class="line">  console.log(digits[index]);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>å¹¶ä¸”è¿™å¯¹å¯¹è±¡ä¹Ÿæ˜¯é€‚ç”¨çš„ï¼Œä½†æ˜¯è¿™ä¸ªéå†æ–¹å¼ä¹Ÿæœ‰ä¸€äº›é—®é¢˜:</p>
<p>æ­£å¦‚ä¸Šé¢<code>code</code>ä¸­ï¼Œéå†çš„æ˜¯è®¡æ•°å™¨ï¼Œå½“éœ€è¦æ¯ä¸ª<code>value</code>å€¼çš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°å–å€¼<code>digits[index]</code>;</p>
<p>å¹¶ä¸”forâ€¦inä¼šæŠŠæ‰€æœ‰çš„å¯æšä¸¾å±æ€§éå†å‡ºæ¥ï¼Œå¦‚å¢åŠ åˆ°åŸå‹é“¾ä¸Šçš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">Array.prototype.decimalfy = function() &#123;</div><div class="line">  for (let i = 0; i &lt; this.length; i++) &#123;</div><div class="line">    this[i] = this[i].toFixed(2);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const digits = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];</div><div class="line"></div><div class="line">for (const index in digits) &#123;</div><div class="line">  console.log(digits[index]);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">// è¾“å‡º</div><div class="line">// 0 1 2 3 4 5 6 7 8 9 </div><div class="line">/*</div><div class="line">function() &#123;</div><div class="line">â€ƒfor (let i = 0; i &lt; this.length; i++) &#123;</div><div class="line">â€ƒâ€ƒthis[i] = this[i].toFixed(2);</div><div class="line">â€ƒ&#125;</div><div class="line">&#125;</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>è¿™ä¹Ÿæ˜¯forâ€¦inæ²¡æœ‰åœ¨jsç¨‹åºå‘˜ä¸­æ™®éæµè¡Œçš„åŸå› ;</p>
<blockquote>
<p>æ³¨æ„ï¼šforEachæ–¹æ³•ä¹Ÿæ˜¯jséå†æ•°ç»„çš„ä¸€ç§æ–¹æ³•ï¼ŒforEachå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„æ–¹æ³•ï¼Œå› è€Œä¸€èˆ¬<br>é€‚ç”¨åœ¨æ•°ç»„ä¸Šï¼Œå¹¶ä¸”æ²¡æœ‰æ–¹æ³•è·³å‡ºå¾ªç¯ï¼›</p>
</blockquote>
<h4 id="forâ€¦of"><a href="#forâ€¦of" class="headerlink" title="forâ€¦of"></a>forâ€¦of</h4><p>ç›´æ¥çœ‹ä¸€ä¸ªæ —å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">for(let v of &apos;hello&apos;)&#123;</div><div class="line">    console.log(v);</div><div class="line">&#125;</div><div class="line">// h e l l o</div></pre></td></tr></table></figure></p>
<p>forâ€¦ofæ˜¯é’ˆå¯¹<em>é›†åˆ</em>(æ³¨æ„:ésetè€Œæ˜¯collections)ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡ï¼Œé€‚ç”¨èŒƒå›´æ˜¯iterableå¯¹è±¡ï¼›</p>
<p>ä»€ä¹ˆæ˜¯iterableå¯¹è±¡ï¼Ÿ</p>
<h2 id="è¿­ä»£"><a href="#è¿­ä»£" class="headerlink" title="è¿­ä»£"></a>è¿­ä»£</h2><p>ç¨‹åºå‘˜æ˜¯ä¸€ç¾¤ä¸åœæŠ˜è…¾çš„ç‰©ç§ï¼Œä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„éå†ï¼Œåœ¨ES6å¼•å…¥äº†è¿­ä»£åè®®ï¼›è¿­ä»£åè®®æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>iterableåè®®</li>
<li>iteratoråè®®</li>
</ul>
<p>ç”±äºè¿™æ¬¡ä¸»é¢˜æ˜¯è®²éå†ä¸è¿­ä»£ï¼Œæ‰€ä»¥åªæ¶‰åŠç¬¬ä¸€ç§åè®®; </p>
<h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>ä»€ä¹ˆæ˜¯iterable, ECMAå®˜æ–¹æ–‡æ¡£æ˜¯å¦‚ä¸‹å®šä¹‰çš„ï¼š</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>[Symbol.iterator]</td>
<td>A zero arguments function that returns an object, conforming to the iterator protocol.</td>
<td></td>
</tr>
</tbody>
</table>
<p>ä¹Ÿå°±æ˜¯è¯´åªè¦å…·æœ‰[Symbol.iterator]å±æ€§ï¼Œå¹¶ä¸”å…¶å€¼æ˜¯ä¸€ä¸ª0å‚æ•°å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ‰§è¡Œè¿”å›çš„æ˜¯ä¸€ä¸ªç¬¦åˆiteratoråè®®çš„å¯¹è±¡,<br>ç¬¦åˆä¸Šè¿°æ¡ä»¶çš„å¯¹è±¡å°±æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var a = []</div><div class="line">typeof a[Symbol.iterator] // function</div><div class="line">a[Symbol.iterator]() // Array Iterator &#123;&#125;</div></pre></td></tr></table></figure>
<h4 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a>èŒƒå›´</h4><p>ç›®å‰JSå†…ç½®çš„å¯è¿­ä»£å¯¹è±¡æœ‰String, Array, Map, Set, TypedArray, argumentsç­‰ï¼›éœ€è¦æ³¨æ„çš„æ˜¯æ™®é€šçš„objæ˜¯ä¸èƒ½è¿­ä»£çš„ï¼›</p>
<h4 id="å‡ ä¸ªç”¨æ³•"><a href="#å‡ ä¸ªç”¨æ³•" class="headerlink" title="å‡ ä¸ªç”¨æ³•"></a>å‡ ä¸ªç”¨æ³•</h4><p>éå†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var someString = &apos;hi&apos;;</div><div class="line">for(let v of something) &#123;</div><div class="line">    console.log(v);</div><div class="line">&#125;</div><div class="line">// h i</div></pre></td></tr></table></figure>
<p>é€‚ç”¨äºå…ƒç´ å±•å¼€:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var set1 = new Set([0, 1, 2]);</div><div class="line">var set2 = new Set([2, 3, 4, 5]);</div><div class="line">var arr = [...set1, ...set2]; // [0, 1, 2, 2, 3, 4, 5]</div></pre></td></tr></table></figure></p>
<p>è½¬æ¢æ•°ç»„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Array.from(new Set([&apos;a&apos;, 1, &apos;b&apos;, 2]))</div></pre></td></tr></table></figure></p>
<p>è½¬æ¢æˆç”Ÿæˆå™¨<br>```<br>var arr = [1,2,3];<br>var iter = arr<a href="">Symbol.iterator</a>;<br>iter.next(); // {value: 1, done: false}<br>iter.next(); // {value: 2, done: false}<br>iter.next(); // {value: 3, done: false}<br>iter.next(); // {value: undefined, done: true}</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2016/02/21/linkedList/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/21/linkedList/" itemprop="url">leetcodeä¹‹linked list</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-02-21T00:00:00+08:00">
                2016-02-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="é“¾è¡¨javascriptå®ç°"><a href="#é“¾è¡¨javascriptå®ç°" class="headerlink" title="é“¾è¡¨javascriptå®ç°"></a>é“¾è¡¨javascriptå®ç°</h2><p>é“¾è¡¨ï¼ˆLinked listï¼‰æ˜¯ä¸€ç§å¸¸è§çš„åŸºç¡€æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§çº¿æ€§è¡¨ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæŒ‰çº¿æ€§çš„é¡ºåºå­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹é‡Œå­˜åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ(Pointer)ã€‚ç”±äºä¸å¿…é¡»æŒ‰é¡º<br>åºå­˜å‚¨ï¼Œé“¾è¡¨åœ¨æ’å…¥çš„æ—¶å€™å¯ä»¥è¾¾åˆ°O(1)çš„å¤æ‚åº¦ï¼Œæ¯”å¦ä¸€ç§çº¿æ€§è¡¨é¡ºåºè¡¨å¿«å¾—å¤šï¼Œä½†æ˜¯æŸ¥æ‰¾ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…è®¿é—®ç‰¹å®šç¼–å·çš„èŠ‚ç‚¹åˆ™éœ€è¦O(n)çš„æ—¶é—´ï¼Œè€Œé¡ºåºè¡¨ç›¸åº”çš„æ—¶é—´å¤æ‚åº¦<br>åˆ†åˆ«æ˜¯O(logn)å’ŒO(1)ã€‚</p>
<p>javascriptå®ç°å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•ï¼š</p>
<pre><code>function ListNode(val) {
    this.val = val;
    this.next = null;
}
</code></pre><p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹é“¾è¡¨é¢˜ç›®çš„åŸºæœ¬ç±»å‹:</p>
<h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><p>åˆ é™¤çš„é¢˜ç›®æœ‰19, 83, 203, 237, 82</p>
<p>åˆ é™¤å…¶å®å°±æ˜¯æ‰¾åˆ°è¦åˆ é™¤å…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ pre;</p>
<pre><code>pre.next = pre.next.next;
</code></pre><p>ä¸è¿‡è¿˜æœ‰ä¸€ç§æ˜¯å‡åˆ é™¤ï¼Œæ‰¾å‰ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠè¦åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„å€¼èµ‹ç»™å½“å‰åˆ é™¤ï¼Œç„¶ååˆ é™¤ä¸‹ä¸€ä¸ªå…ƒç´ ï¼›</p>
<pre><code>cur.val = cur.next.val;
cur.next = cur.next.next;
</code></pre><p>çœ‹ä¸€ä¸ªå…¸å‹ä¾‹é¢˜<a href="https://leetcode.com/problems/remove-nth-node-from-end-of-list/" target="_blank" rel="external">19. Remove Nth Node From End of List</a>:</p>
<p>Given a linked list, remove the nth node from the end of list and return its head.<br>For example,</p>
<pre><code>Given linked list: 1-&gt;2-&gt;3-&gt;4-&gt;5, and n = 2.
After removing the second node from the end, the linked list becomes 1-&gt;2-&gt;3-&gt;5.
</code></pre><p>è¿™ä¸ªé¢˜ç›®æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ä¸ªå˜é‡ï¼Œfastå˜é‡å…ˆèµ°næ­¥ï¼Œç„¶åfastå’Œslowå˜é‡åŒæ—¶èµ°ï¼Œç›´åˆ°fastä¸ºnull; æ­¤æ—¶slowå°±æ˜¯åˆ°è¾¾äº†å€’æ•°ç¬¬nä¸ªå…ƒç´ ï¼Œæ‰§è¡Œåˆ é™¤å³å¯ï¼›ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>var removeNthFromEnd = function(head, n) {
    var left, before, right = head;
    left = before = {next: head}; 
    while (n--) right = right.next;
    while (right) {
        right = right.next;
        left = left.next;
    }
    left.next = left.next.next;
    return before.next;
};
</code></pre><h2 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h2><p>æŸ¥æ‰¾é¢˜ç›®æœ‰ï¼š160, 141, 142</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹<a href="https://leetcode.com/problems/linked-list-cycle/" target="_blank" rel="external">141. Linked List Cycle</a>ï¼Œåˆ¤æ–­æ˜¯å¦ğŸˆ¶ï¸ç¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆfastå’Œslowï¼Œslowä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œfastä¸€æ¬¡èµ°ä¸¤éƒ¨ï¼Œå¦‚æœğŸˆ¶ï¸ç¯ï¼Œfastå¿…å®šåœ¨ç¯å†…è¿½ä¸Šslowï¼›äºæ˜¯ï¼š</p>
<pre><code>var hasCycle = function(head) {
    var slow = head;
    var fast = head;

    while(fast &amp;&amp; fast.next) {
        fast = fast.next.next;
        slow = slow.next;
        if(fast === slow) {
            return true;
        }
    }
    return false;
};
</code></pre><h2 id="ç¿»è½¬"><a href="#ç¿»è½¬" class="headerlink" title="ç¿»è½¬"></a>ç¿»è½¬</h2><p>ç¿»è½¬é¢˜ç›®æœ‰234ï¼Œ206ï¼Œ24ï¼Œ92ï¼Œ61</p>
<p><a href="https://leetcode.com/problems/palindrome-linked-list/" target="_blank" rel="external">234. Palindrome Linked List</a>å…¶å®æ˜¯ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡çš„é¢˜ç›®ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç¿»è½¬æ¥åˆ¤æ–­ï¼›</p>
<p>é¦–å…ˆåˆ©ç”¨ä¸¤ä¸ªå˜é‡æ¥æ‰¾åˆ°ä¸­é—´ç‚¹ï¼Œç„¶ååˆ†ä¸ºä¸¤ä¸ªé“¾è¡¨ï¼ŒæŠŠåé¢çš„é“¾è¡¨ç¿»è½¬è¿‡æ¥ï¼Œå¹¶åŒæ—¶éå†ä¸¤ä¸ªé“¾è¡¨æ¯”è¾ƒï¼š</p>
<pre><code>var isPalindrome = function(head) {
    function reverse(curr) {
        var prev = null;
        var next;
        while(curr) {
            next = curr.next;
            curr.next = prev;
            prev = curr;
            curr = next;
        }
        return prev;
    }
    var fast = head;
    var slow = head;
    while(fast &amp;&amp; fast.next) {
        fast = fast.next.next;
        slow = slow.next;
    }
    if(fast) slow = slow.next;

    slow = reverse(slow);
    while(slow &amp;&amp; head.val === slow.val) {
        head = head.next;
        slow = slow.next;
    }
    return slow === null;
};
</code></pre><h2 id="åˆå¹¶"><a href="#åˆå¹¶" class="headerlink" title="åˆå¹¶"></a>åˆå¹¶</h2><p>åˆå¹¶çš„é¢˜ç›®æœ‰ï¼š21ï¼Œ328ï¼Œ86ï¼Œ148ï¼Œ2ï¼Œ92ï¼Œ143</p>
<p><a href="https://leetcode.com/problems/partition-list/" target="_blank" rel="external">86. Partition List</a>è¿™ä¸ªé¢˜ç›®æ˜¯è®©æˆ‘ä»¬æŠŠæŒ‡å®šå…ƒç´ åé¢çš„éƒ½å°äºå®ƒçš„å…ƒç´ æ”¾åˆ°æŒ‡å®šå…ƒç´ å‰é¢å»ï¼›</p>
<p>æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸¤ä¸ªè¡¨å¤´ï¼Œéå†é“¾è¡¨ï¼ŒæŠŠå°äºæŒ‡å®šå…ƒç´ çš„é“¾æ¥åˆ°ç¬¬ä¸€ä¸ªè¡¨ï¼Œåä¹‹ï¼Œé“¾æ¥åˆ°ç¬¬äºŒä¸ªè¡¨ï¼Œæœ€åæŠŠç¬¬äºŒä¸ªé“¾è¡¨é“¾æ¥åˆ°ç¬¬ä¸€ä¸ªé“¾è¡¨åé¢ï¼›</p>
<pre><code>var partition = function(head, x) {
    var hd1 = new ListNode(0);
    var hd2 = new ListNode(0);
    var p1 = hd1;
    var p2 = hd2;
    while(head) {
        if(head.val &lt; x) {
            p1.next = head;
            p1 = p1.next;
        } else {
            p2.next = head;
            p2 = p2.next;
        }
        head = head.next;
    }
    p2.next = null;
    p1.next = hd2.next;
    return hd1.next;
};
</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å…¶å®é“¾è¡¨çš„æ“ä½œå°±æ˜¯é‚£å‡ ç§ï¼šåˆ é™¤ï¼æŸ¥æ‰¾ï¼ç¿»è½¬ï¼åˆå¹¶, åªè¦æŒæ¡é“¾è¡¨çš„åŸºæœ¬æ“ä½œå¹¶é…åˆæ ‡è®°æˆ–è€…ç‰¹å®šé¢˜ç›®çš„ä¸€äº›ç‰¹æ€§ï¼ŒåŸºæœ¬éƒ½å¯ä»¥è§£å†³ï¼›</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2015/12/27/DiveIntoJs_core/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/12/27/DiveIntoJs_core/" itemprop="url">æ·±å…¥ç†è§£Javascriptï¼š JavaScriptæ ¸å¿ƒ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-12-27T00:00:00+08:00">
                2015-12-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ€è¿‘æœ¬æ¥å‡†å¤‡æŠŠJSçš„å¯¹è±¡ã€ç±»ã€åŸå‹ç»§æ‰¿ã€ä½œç”¨åŸŸé“¾ã€é—­åŒ…ä»¥åŠthiséƒ½å†™ä¸€ä¸‹çš„ï¼Œå‘ç°ä¸€ç¯‡æ–‡ç« å†™çš„å¤ªå¥½äº†ï¼Œå°±ç›´æ¥è½¬è½½è¿‡æ¥ã€‚</p>
<p>ä½œè€…: JeremyWei | å¯ä»¥è½¬è½½, ä½†å¿…é¡»ä»¥è¶…é“¾æ¥å½¢å¼æ ‡æ˜æ–‡ç« åŸå§‹å‡ºå¤„å’Œä½œè€…ä¿¡æ¯åŠç‰ˆæƒå£°æ˜</p>
<p>ç½‘å€: <a href="http://weizhifeng.net/javascript-the-core.html" target="_blank" rel="external">http://weizhifeng.net/javascript-the-core.html</a></p>
<p>æœ€åŸå§‹åœ°å€ï¼š<a href="http://dmitrysoshnikov.com/ecmascript/javascript-the-core/" target="_blank" rel="external">http://dmitrysoshnikov.com/ecmascript/javascript-the-core/</a></p>
<h2 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0.å‰è¨€"></a>0.å‰è¨€</h2><p>è¿™ç¯‡æ–‡ç« æ˜¯ã€Œæ·±å…¥ECMA-262-3ã€ç³»åˆ—çš„ä¸€ä¸ªæ¦‚è§ˆå’Œæ‘˜è¦ã€‚æ¯ä¸ªéƒ¨åˆ†éƒ½åŒ…å«äº†å¯¹åº”ç« èŠ‚çš„é“¾æ¥ï¼Œæ‰€ä»¥ä½ å¯ä»¥é˜…è¯»å®ƒä»¬ä»¥ä¾¿å¯¹å…¶æœ‰æ›´æ·±çš„ç†è§£ã€‚</p>
<p>é¢å‘è¯»è€…ï¼šç»éªŒä¸°å¯Œçš„ç¨‹åºå‘˜ï¼Œä¸“å®¶ã€‚</p>
<p>æˆ‘ä»¬ä»¥æ€è€ƒå¯¹è±¡çš„æ¦‚å¿µåšä¸ºå¼€å§‹ï¼Œè¿™æ˜¯ECMAScriptçš„åŸºç¡€ã€‚</p>
<h2 id="1-å¯¹è±¡"><a href="#1-å¯¹è±¡" class="headerlink" title="1.å¯¹è±¡"></a>1.å¯¹è±¡</h2><p>ECMAScriptåšä¸ºä¸€ä¸ªé«˜åº¦æŠ½è±¡çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œæ˜¯é€šè¿‡å¯¹è±¡æ¥äº¤äº’çš„ã€‚å³ä½¿ECMAScripté‡Œè¾¹ä¹Ÿæœ‰åŸºæœ¬ç±»å‹ï¼Œä½†æ˜¯ï¼Œå½“éœ€è¦çš„æ—¶å€™ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢«è½¬æ¢æˆå¯¹è±¡ã€‚</p>
<pre><code>ä¸€ä¸ªå¯¹è±¡å°±æ˜¯ä¸€ä¸ªå±æ€§é›†åˆï¼Œå¹¶æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„prototypeï¼ˆåŸå‹ï¼‰å¯¹è±¡ã€‚è¿™ä¸ªprototypeå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…nullã€‚
</code></pre><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå…³äºå¯¹è±¡çš„åŸºæœ¬ä¾‹å­ã€‚ä¸€ä¸ªå¯¹è±¡çš„prototypeæ˜¯ä»¥å†…éƒ¨çš„[[Prototype]]å±æ€§æ¥å¼•ç”¨çš„ã€‚ä½†æ˜¯ï¼Œåœ¨ç¤ºæ„å›¾é‡Œè¾¹æˆ‘ä»¬å°†ä¼šä½¿ç”¨<code>__&lt;internal-property&gt;__</code>ä¸‹åˆ’çº¿æ ‡è®°æ¥æ›¿ä»£ä¸¤ä¸ªæ‹¬å·ï¼Œå¯¹äºprototypeå¯¹è±¡æ¥è¯´æ˜¯ï¼š<code>__proto__</code>ã€‚</p>
<p>å¯¹äºä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code>var foo = {
  x: 10,
  y: 20
};
</code></pre><p>æˆ‘ä»¬æ‹¥æœ‰ä¸€ä¸ªè¿™æ ·çš„ç»“æ„ï¼Œä¸¤ä¸ªæ˜æ˜¾çš„è‡ªèº«å±æ€§å’Œä¸€ä¸ªéšå«çš„<code>__proto__</code>å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯å¯¹fooåŸå‹å¯¹è±¡çš„å¼•ç”¨ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/basic-object.png" alt="åŸºæœ¬å¯¹è±¡"></p>
<p>è¿™äº›prototypeæœ‰ä»€ä¹ˆç”¨ï¼Ÿè®©æˆ‘ä»¬ä»¥<em>åŸå‹é“¾</em>ï¼ˆprototype chainï¼‰çš„æ¦‚å¿µæ¥å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 id="2-åŸå‹é“¾"><a href="#2-åŸå‹é“¾" class="headerlink" title="2.åŸå‹é“¾"></a>2.åŸå‹é“¾</h2><p>åŸå‹å¯¹è±¡ä¹Ÿæ˜¯ç®€å•çš„å¯¹è±¡å¹¶ä¸”å¯ä»¥æ‹¥æœ‰å®ƒä»¬è‡ªå·±çš„åŸå‹ã€‚å¦‚æœä¸€ä¸ªåŸå‹å¯¹è±¡çš„åŸå‹æ˜¯ä¸€ä¸ªénullçš„å¼•ç”¨ï¼Œé‚£ä¹ˆä»¥æ­¤ç±»æ¨ï¼Œè¿™å°±å«ä½œ<em>åŸå‹é“¾</em>ã€‚</p>
<pre><code>åŸå‹é“¾æ˜¯ä¸€ä¸ªç”¨æ¥å®ç°ç»§æ‰¿å’Œå…±äº«å±æ€§çš„æœ‰é™å¯¹è±¡é“¾ã€‚
</code></pre><p>è€ƒè™‘è¿™ä¹ˆä¸€ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬æ‹¥æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå®ƒä»¬ä¹‹é—´åªæœ‰ä¸€å°éƒ¨åˆ†ä¸åŒï¼Œå…¶ä»–éƒ¨åˆ†éƒ½ç›¸åŒã€‚æ˜¾ç„¶ï¼Œå¯¹äºä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬å°†ä¼šé‡ç”¨ç›¸ä¼¼çš„åŠŸèƒ½/ä»£ç ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªå•ç‹¬çš„å¯¹è±¡ä¸­é‡å¤å®ƒã€‚åœ¨åŸºäºç±»çš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªä»£ç é‡ç”¨é£æ ¼å«ä½œç±»ç»§æ‰¿ï¼ä½ æŠŠç›¸ä¼¼çš„åŠŸèƒ½æ”¾å…¥ç±» Aä¸­ï¼Œç„¶åç±» Bå’Œç±» Cç»§æ‰¿ç±» Aï¼Œå¹¶ä¸”æ‹¥æœ‰å®ƒä»¬è‡ªå·±çš„ä¸€äº›å°çš„é¢å¤–å˜åŠ¨ã€‚</p>
<p>ECMAScriptä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µã€‚ä½†æ˜¯ï¼Œä»£ç é‡ç”¨çš„é£æ ¼å¹¶æ²¡æœ‰å¤ªå¤šä¸åŒï¼ˆå°½ç®¡ä»æŸäº›æ–¹é¢æ¥è¯´æ¯”åŸºäºç±»ï¼ˆclass-basedï¼‰çš„æ–¹å¼è¦æ›´åŠ çµæ´»ï¼‰å¹¶ä¸”é€šè¿‡<em>åŸå‹é“¾</em>æ¥å®ç°ã€‚è¿™ç§ç»§æ‰¿æ–¹å¼å«ä½œ<em>å§”æ‰˜ç»§æ‰¿</em>(delegation based inheritance)ï¼ˆæˆ–è€…ï¼Œæ›´è´´è¿‘ECMAScriptä¸€äº›ï¼Œå«ä½œ<em>åŸå‹ç»§æ‰¿</em>(prototype based inheritance)ï¼‰ã€‚</p>
<p>è·Ÿä¾‹å­ä¸­çš„ç±»Aï¼ŒBï¼ŒCç›¸ä¼¼ï¼Œåœ¨ECMAScriptä¸­ä½ åˆ›å»ºå¯¹è±¡ï¼šaï¼Œbï¼Œcã€‚äºæ˜¯ï¼Œå¯¹è±¡aä¸­å­˜å‚¨å¯¹è±¡bå’Œcä¸­é€šç”¨çš„éƒ¨åˆ†ã€‚ç„¶åbå’Œcåªå­˜å‚¨å®ƒä»¬è‡ªèº«çš„é¢å¤–å±æ€§æˆ–è€…æ–¹æ³•ã€‚</p>
<pre><code>var a = {
  x: 10,
  calculate: function (z) {
    return this.x + this.y + z
  }
};

var b = {
  y: 20,
  __proto__: a
};

var c = {
  y: 30,
  __proto__: a
};

// call the inherited method
b.calculate(30); // 60
c.calculate(40); // 80
</code></pre><p>è¶³å¤Ÿç®€å•ï¼Œæ˜¯ä¸æ˜¯ï¼Ÿæˆ‘ä»¬çœ‹åˆ°bå’Œcè®¿é—®åˆ°äº†åœ¨å¯¹è±¡aä¸­å®šä¹‰çš„<code>calculate</code>æ–¹æ³•ã€‚è¿™æ˜¯é€šè¿‡åŸå‹é“¾å®ç°çš„ã€‚</p>
<p>è§„åˆ™å¾ˆç®€å•ï¼šå¦‚æœä¸€ä¸ªå±æ€§æˆ–è€…ä¸€ä¸ªæ–¹æ³•åœ¨å¯¹è±¡<em>è‡ªèº«</em>ä¸­æ— æ³•æ‰¾åˆ°ï¼ˆä¹Ÿå°±æ˜¯å¯¹è±¡è‡ªèº«æ²¡æœ‰ä¸€ä¸ªé‚£æ ·çš„å±æ€§ï¼‰ï¼Œç„¶åå®ƒä¼šå°è¯•åœ¨åŸå‹é“¾ä¸­å¯»æ‰¾è¿™ä¸ªå±æ€§/æ–¹æ³•ã€‚å¦‚æœè¿™ä¸ªå±æ€§åœ¨åŸå‹ä¸­æ²¡æœ‰æŸ¥æ‰¾åˆ°ï¼Œé‚£ä¹ˆå°†ä¼šæŸ¥æ‰¾è¿™ä¸ªåŸå‹çš„åŸå‹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œéå†æ•´ä¸ªåŸå‹é“¾ï¼ˆå½“ç„¶è¿™åœ¨ç±»ç»§æ‰¿ä¸­ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå½“è§£æä¸€ä¸ªç»§æ‰¿çš„æ–¹æ³•çš„æ—¶å€™ï¼æˆ‘ä»¬éå†<em>classé“¾</em>ï¼ˆ class chainï¼‰ï¼‰ã€‚ç¬¬ä¸€ä¸ªè¢«æŸ¥æ‰¾åˆ°çš„åŒåå±æ€§/æ–¹æ³•ä¼šè¢«ä½¿ç”¨ã€‚å› æ­¤ï¼Œä¸€ä¸ªè¢«æŸ¥æ‰¾åˆ°çš„å±æ€§å«ä½œ<em>ç»§æ‰¿</em>å±æ€§ã€‚å¦‚æœåœ¨éå†äº†æ•´ä¸ªåŸå‹é“¾ä¹‹åè¿˜æ˜¯æ²¡æœ‰æŸ¥æ‰¾åˆ°è¿™ä¸ªå±æ€§çš„è¯ï¼Œè¿”å›<code>undefined</code>å€¼ã€‚</p>
<p>æ³¨æ„ï¼Œç»§æ‰¿æ–¹æ³•ä¸­æ‰€ä½¿ç”¨çš„thisçš„å€¼è¢«è®¾ç½®ä¸º<em>åŸå§‹å¯¹è±¡</em>ï¼Œè€Œå¹¶ä¸æ˜¯åœ¨å…¶ä¸­æŸ¥æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•çš„ï¼ˆåŸå‹ï¼‰å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­<code>this.y</code>å–çš„æ˜¯bå’Œcä¸­çš„å€¼ï¼Œè€Œä¸æ˜¯aä¸­çš„å€¼ã€‚ä½†æ˜¯ï¼Œ<code>this.x</code>æ˜¯å–çš„æ˜¯aä¸­çš„å€¼ï¼Œå¹¶ä¸”åˆä¸€æ¬¡é€šè¿‡<em>åŸå‹é“¾</em>æœºåˆ¶å®Œæˆã€‚</p>
<p>å¦‚æœæ²¡æœ‰æ˜ç¡®ä¸ºä¸€ä¸ªå¯¹è±¡æŒ‡å®šåŸå‹ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šä½¿ç”¨<strong>proto</strong>çš„é»˜è®¤å€¼ï¼<code>Object.prototypeã€‚Object.prototype</code>å¯¹è±¡è‡ªèº«ä¹Ÿæœ‰ä¸€ä¸ª<code>__proto__</code>å±æ€§ï¼Œè¿™æ˜¯åŸå‹é“¾çš„<em>ç»ˆç‚¹</em>å¹¶ä¸”å€¼ä¸ºnullã€‚</p>
<p>ä¸‹ä¸€å¼ å›¾å±•ç¤ºäº†å¯¹è±¡aï¼Œbï¼Œcä¹‹é—´çš„ç»§æ‰¿å±‚çº§ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/prototype-chain.png" alt="åŸå‹é“¾"></p>
<p>æ³¨æ„ï¼š ES5æ ‡å‡†åŒ–äº†ä¸€ä¸ªå®ç°åŸå‹ç»§æ‰¿çš„å¯é€‰æ–¹æ³•ï¼Œå³ä½¿ç”¨<code>Object.create</code>å‡½æ•°ï¼š</p>
<pre><code>var b = Object.create(a, {y: {value: 20}});
var c = Object.create(a, {y: {value: 30}});
</code></pre><p>ä½ å¯ä»¥åœ¨å¯¹åº”çš„ç« èŠ‚è·å–åˆ°æ›´å¤šå…³äºES5æ–°APIçš„ä¿¡æ¯ã€‚ ES6æ ‡å‡†åŒ–äº† <code>__proto__</code>å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¯¹è±¡åˆå§‹åŒ–çš„æ—¶å€™ä½¿ç”¨å®ƒã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹éœ€è¦å¯¹è±¡æ‹¥æœ‰<em>ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„çŠ¶æ€ç»“æ„</em>ï¼ˆä¹Ÿå°±æ˜¯ç›¸åŒçš„å±æ€§é›†åˆï¼‰ï¼Œèµ‹ä»¥ä¸åŒçš„çŠ¶æ€å€¼ã€‚åœ¨è¿™ä¸ªæƒ…å†µä¸‹æˆ‘ä»¬å¯èƒ½éœ€è¦ä½¿ç”¨<em>æ„é€ å‡½æ•°</em>(constructor function)ï¼Œå…¶ä»¥<em>æŒ‡å®šçš„æ¨¡å¼</em>æ¥åˆ›é€ å¯¹è±¡ã€‚</p>
<h2 id="3-æ„é€ å‡½æ•°"><a href="#3-æ„é€ å‡½æ•°" class="headerlink" title="3.æ„é€ å‡½æ•°"></a>3.æ„é€ å‡½æ•°</h2><p>é™¤äº†ä»¥æŒ‡å®šæ¨¡å¼åˆ›å»ºå¯¹è±¡ä¹‹å¤–ï¼Œ<em>æ„é€ å‡½æ•°</em>ä¹Ÿåšäº†å¦ä¸€ä¸ªæœ‰ç”¨çš„äº‹æƒ…ï¼<em>å®ƒè‡ªåŠ¨åœ°ä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡è®¾ç½®ä¸€ä¸ªåŸå‹å¯¹è±¡</em>ã€‚è¿™ä¸ªåŸå‹å¯¹è±¡å­˜å‚¨åœ¨<code>ConstructorFunction.prototype</code>å±æ€§ä¸­ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æ¥é‡å†™ä¸Šä¸€ä¸ªæ‹¥æœ‰å¯¹è±¡bå’Œå¯¹è±¡cçš„ä¾‹å­ã€‚å› æ­¤ï¼Œå¯¹è±¡aï¼ˆä¸€ä¸ªåŸå‹å¯¹è±¡ï¼‰çš„è§’è‰²ç”±<code>Foo.prototype</code>æ¥æ‰®æ¼”ï¼š</p>
<pre><code>// a constructor function
function Foo(y) {
  // which may create objects
  // by specified pattern: they have after
  // creation own &quot;y&quot; property
  this.y = y;
}

// also &quot;Foo.prototype&quot; stores reference
// to the prototype of newly created objects,
// so we may use it to define shared/inherited
// properties or methods, so the same as in
// previous example we have:

// inherited property &quot;x&quot;
Foo.prototype.x = 10;

// and inherited method &quot;calculate&quot;
Foo.prototype.calculate = function (z) {
  return this.x + this.y + z;
};

// now create our &quot;b&quot; and &quot;c&quot;
// objects using &quot;pattern&quot; Foo
var b = new Foo(20);
var c = new Foo(30);

// call the inherited method
b.calculate(30); // 60
c.calculate(40); // 80

// let&apos;s show that we reference
// properties we expect

console.log(

  b.__proto__ === Foo.prototype, // true
  c.__proto__ === Foo.prototype, // true

  // also &quot;Foo.prototype&quot; automatically creates
  // a special property &quot;constructor&quot;, which is a
  // reference to the constructor function itself;
  // instances &quot;b&quot; and &quot;c&quot; may found it via
  // delegation and use to check their constructor

  b.constructor === Foo, // true
  c.constructor === Foo, // true
  Foo.prototype.constructor === Foo // true

  b.calculate === b.__proto__.calculate, // true
  b.__proto__.calculate === Foo.prototype.calculate // true

);
</code></pre><p>è¿™ä¸ªä»£ç å¯ä»¥è¡¨ç¤ºä¸ºå¦‚ä¸‹å…³ç³»ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/constructor-proto-chain.png" alt="constructor-proto-chain"></p>
<p>è¿™å¼ å›¾åˆä¸€æ¬¡è¯´æ˜äº†æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹ã€‚æ„é€ å‡½æ•°Fooä¹Ÿæœ‰è‡ªå·±çš„<code>__proto__</code>ï¼Œå€¼ä¸º<code>Function.prototype</code>ï¼Œ<code>Function.prototype</code>ä¹Ÿé€šè¿‡å…¶<code>__proto__</code>å±æ€§å…³è”åˆ°<code>Object.prototype</code>ã€‚å› æ­¤ï¼Œé‡ç”³ä¸€ä¸‹ï¼Œ<code>Foo.prototype</code>å°±æ˜¯Fooçš„ä¸€ä¸ªæ˜ç¡®çš„å±æ€§ï¼ŒæŒ‡å‘å¯¹è±¡bå’Œå¯¹è±¡cçš„åŸå‹ã€‚</p>
<p>æ­£å¼æ¥è¯´ï¼Œå¦‚æœæ€è€ƒä¸€ä¸‹<em>åˆ†ç±»</em>çš„æ¦‚å¿µï¼ˆå¹¶ä¸”æˆ‘ä»¬å·²ç»å¯¹Fooè¿›è¡Œäº†<em>åˆ†ç±»</em>ï¼‰ï¼Œé‚£ä¹ˆæ„é€ å‡½æ•°å’ŒåŸå‹å¯¹è±¡åˆåœ¨ä¸€èµ·å¯ä»¥å«ä½œã€Œç±»ã€ã€‚å®é™…ä¸Šï¼Œä¸¾ä¸ªä¾‹å­ï¼ŒPythonçš„ç¬¬ä¸€çº§ï¼ˆfirst-classï¼‰åŠ¨æ€ç±»ï¼ˆdynamic classesï¼‰æ˜¾ç„¶æ˜¯ä»¥åŒæ ·çš„å±æ€§/æ–¹æ³•å¤„ç†æ–¹æ¡ˆæ¥å®ç°çš„ã€‚ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼ŒPythonä¸­çš„ç±»å°±æ˜¯ECMAScriptä½¿ç”¨çš„å§”æ‰˜ç»§æ‰¿çš„ä¸€ä¸ªè¯­æ³•ç³–ã€‚</p>
<p>æ³¨æ„: åœ¨ES6ä¸­ã€Œç±»ã€çš„æ¦‚å¿µè¢«æ ‡å‡†åŒ–äº†ï¼Œå¹¶ä¸”å®é™…ä¸Šä»¥ä¸€ç§æ„å»ºåœ¨æ„é€ å‡½æ•°ä¸Šé¢çš„è¯­æ³•ç³–æ¥å®ç°ï¼Œå°±åƒä¸Šé¢æè¿°çš„ä¸€æ ·ã€‚ä»è¿™ä¸ªè§’åº¦æ¥çœ‹åŸå‹é“¾æˆä¸ºäº†ç±»ç»§æ‰¿çš„ä¸€ç§å…·ä½“å®ç°æ–¹å¼ï¼š</p>
<pre><code>// ES6
class Foo {
  constructor(name) {
    this._name = name;
  }

  getName() {
    return this._name;
  }
}

class Bar extends Foo {
  getName() {
    return super.getName() + &apos; Doe&apos;;
  }
}

var bar = new Bar(&apos;John&apos;);
console.log(bar.getName()); // John Doe
</code></pre><p>æœ‰å…³è¿™ä¸ªä¸»é¢˜çš„å®Œæ•´ã€è¯¦ç»†çš„è§£é‡Šå¯ä»¥åœ¨ES3ç³»åˆ—çš„ç¬¬ä¸ƒç« æ‰¾åˆ°ã€‚åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<a href="http://dmitrysoshnikov.com/ecmascript/chapter-7-1-oop-general-theory/" target="_blank" rel="external">7.1 é¢å‘å¯¹è±¡.åŸºæœ¬ç†è®º</a>ï¼Œåœ¨é‚£é‡Œä½ å°†ä¼šæ‰¾åˆ°å¯¹å„ç§é¢å‘å¯¹è±¡èŒƒä¾‹ã€é£æ ¼çš„æè¿°ä»¥åŠå®ƒä»¬å’ŒECMAScriptä¹‹é—´çš„å¯¹æ¯”ï¼Œç„¶ååœ¨<a href="http://dmitrysoshnikov.com/ecmascript/chapter-7-2-oop-ecmascript-implementation/" target="_blank" rel="external">7.2 é¢å‘å¯¹è±¡.ECMAScriptå®ç°</a>ï¼Œæ˜¯å¯¹ECMAScriptä¸­é¢å‘å¯¹è±¡çš„ä»‹ç»ã€‚</p>
<p>ç°åœ¨ï¼Œåœ¨æˆ‘ä»¬çŸ¥é“äº†å¯¹è±¡çš„åŸºç¡€ä¹‹åï¼Œè®©æˆ‘ä»¬çœ‹çœ‹<em>è¿è¡Œæ—¶ç¨‹åºçš„æ‰§è¡Œ</em>ï¼ˆruntime program executionï¼‰åœ¨ECMAScriptä¸­æ˜¯å¦‚ä½•å®ç°çš„ã€‚è¿™å«ä½œ<em>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</em>ï¼ˆexecution context stackï¼‰ï¼Œå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ ä¹Ÿå¯ä»¥æŠ½è±¡æˆä¸ºä¸€ä¸ªå¯¹è±¡ã€‚æ˜¯çš„ï¼ŒECMAScriptå‡ ä¹åœ¨ä»»ä½•åœ°æ–¹éƒ½å’Œå¯¹è±¡çš„æ¦‚å¿µæ‰“äº¤é“;)</p>
<h2 id="4-æ‰§è¡Œä¸Šä¸‹æ–‡å †æ ˆ"><a href="#4-æ‰§è¡Œä¸Šä¸‹æ–‡å †æ ˆ" class="headerlink" title="4.æ‰§è¡Œä¸Šä¸‹æ–‡å †æ ˆ"></a>4.æ‰§è¡Œä¸Šä¸‹æ–‡å †æ ˆ</h2><p>è¿™é‡Œæœ‰ä¸‰ç§ç±»å‹çš„ECMAScriptä»£ç ï¼š<em>å…¨å±€ä»£ç </em>ã€<em>å‡½æ•°ä»£ç </em>å’Œ<em>evalä»£ç </em>ã€‚æ¯ä¸ªä»£ç æ˜¯åœ¨å…¶<em>æ‰§è¡Œä¸Šä¸‹æ–‡</em>ï¼ˆexecution contextï¼‰ä¸­è¢«æ±‚å€¼çš„ã€‚è¿™é‡Œåªæœ‰ä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡ï¼Œå¯èƒ½æœ‰å¤šä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä»¥åŠ<em>eval</em>æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚å¯¹ä¸€ä¸ªå‡½æ•°çš„æ¯æ¬¡è°ƒç”¨ï¼Œä¼šè¿›å…¥åˆ°å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶å¯¹å‡½æ•°ä»£ç ç±»å‹è¿›è¡Œæ±‚å€¼ã€‚æ¯æ¬¡å¯¹<code>eval</code>å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œä¼šè¿›å…¥<em>eval</em>æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶å¯¹å…¶ä»£ç è¿›è¡Œæ±‚å€¼ã€‚</p>
<p>æ³¨æ„ï¼Œä¸€ä¸ªå‡½æ•°å¯èƒ½ä¼šåˆ›å»ºæ— æ•°çš„ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºå¯¹å‡½æ•°çš„æ¯æ¬¡è°ƒç”¨ï¼ˆå³ä½¿è¿™ä¸ªå‡½æ•°é€’å½’çš„è°ƒç”¨è‡ªå·±ï¼‰éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå…·æœ‰æ–°çŠ¶æ€çš„ä¸Šä¸‹æ–‡ï¼š</p>
<pre><code>function foo(bar) {}

// call the same function,
// generate three different
// contexts in each call, with
// different context state (e.g. value
// of the &quot;bar&quot; argument)

foo(10);
foo(20);
foo(30);
</code></pre><p>ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡å¯èƒ½ä¼šè§¦å‘å¦ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œæ¯”å¦‚ï¼Œä¸€ä¸ªå‡½æ•°è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–è€…åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸€ä¸ªå…¨å±€å‡½æ•°ï¼‰ï¼Œç­‰ç­‰ã€‚ä»é€»è¾‘ä¸Šæ¥è¯´ï¼Œè¿™æ˜¯ä»¥æ ˆçš„å½¢å¼å®ç°çš„ï¼Œå®ƒå«ä½œ<em>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</em>ã€‚</p>
<p>ä¸€ä¸ªè§¦å‘å…¶ä»–ä¸Šä¸‹æ–‡çš„ä¸Šä¸‹æ–‡å«ä½œ<em>caller</em>ã€‚è¢«è§¦å‘çš„ä¸Šä¸‹æ–‡å«ä½œ<em>callee</em>ã€‚calleeåœ¨åŒä¸€æ—¶é—´å¯èƒ½æ˜¯ä¸€äº›å…¶ä»–calleeçš„callerï¼ˆæ¯”å¦‚ï¼Œä¸€ä¸ªåœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œä¹‹åè°ƒç”¨äº†ä¸€äº›å†…éƒ¨å‡½æ•°ï¼‰ã€‚</p>
<p>å½“ä¸€ä¸ªcallerè§¦å‘ï¼ˆè°ƒç”¨ï¼‰äº†ä¸€ä¸ªcalleeï¼Œè¿™ä¸ªcallerä¼šæš‚ç¼“è‡ªèº«çš„æ‰§è¡Œï¼Œç„¶åæŠŠæ§åˆ¶æƒä¼ é€’ç»™calleeã€‚è¿™ä¸ªcalleeè¢«pushåˆ°æ ˆä¸­ï¼Œå¹¶æˆä¸ºä¸€ä¸ªè¿è¡Œä¸­ï¼ˆæ´»åŠ¨çš„ï¼‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚åœ¨calleeçš„ä¸Šä¸‹æ–‡ç»“æŸåï¼Œå®ƒä¼šæŠŠæ§åˆ¶æƒè¿”å›ç»™callerï¼Œç„¶åcallerçš„ä¸Šä¸‹æ–‡ç»§ç»­æ‰§è¡Œï¼ˆå®ƒå¯èƒ½è§¦å‘å…¶ä»–ä¸Šä¸‹æ–‡ï¼‰ç›´åˆ°å®ƒç»“æŸï¼Œä»¥æ­¤ç±»æ¨ã€‚calleeå¯èƒ½ç®€å•çš„è¿”å›æˆ–è€…ç”±äºå¼‚å¸¸è€Œé€€å‡ºã€‚ä¸€ä¸ªæŠ›å‡ºçš„ä½†æ˜¯æ²¡æœ‰è¢«æ•è·çš„å¼‚å¸¸å¯èƒ½é€€å‡ºï¼ˆä»æ ˆä¸­popï¼‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªä¸Šä¸‹æ–‡ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰ECMAScript<em>ç¨‹åºçš„è¿è¡Œæ—¶</em>å¯ä»¥ç”¨<em>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆECï¼‰æ ˆ</em>æ¥è¡¨ç¤ºï¼Œ<em>æ ˆé¡¶</em>æ˜¯å½“å‰<em>æ´»è·ƒ</em>(active)ä¸Šä¸‹æ–‡ï¼š</p>
<p>å½“ç¨‹åºå¼€å§‹çš„æ—¶å€™å®ƒä¼šè¿›å…¥<em>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</em>ï¼Œæ­¤ä¸Šä¸‹æ–‡ä½äº<em>æ ˆåº•</em>å¹¶ä¸”æ˜¯æ ˆä¸­çš„<em>ç¬¬ä¸€ä¸ªå…ƒç´ </em>ã€‚ç„¶åå…¨å±€ä»£ç è¿›è¡Œä¸€äº›åˆå§‹åŒ–ï¼Œåˆ›å»ºéœ€è¦çš„å¯¹è±¡å’Œå‡½æ•°ã€‚åœ¨å…¨å±€ä¸Šä¸‹æ–‡çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå®ƒçš„ä»£ç å¯èƒ½è§¦å‘å…¶ä»–ï¼ˆå·²ç»åˆ›å»ºå®Œæˆçš„ï¼‰å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å°†ä¼šè¿›å…¥å®ƒä»¬è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‘æ ˆä¸­pushæ–°çš„å…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚å½“åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œè¿è¡Œæ—¶ç³»ç»Ÿï¼ˆruntime systemï¼‰å°±ä¼šç­‰å¾…ä¸€äº›<em>äº‹ä»¶</em>ï¼ˆæ¯”å¦‚ï¼Œç”¨æˆ·é¼ æ ‡ç‚¹å‡»ï¼‰ï¼Œè¿™äº›äº‹ä»¶å°†ä¼šè§¦å‘ä¸€äº›å‡½æ•°ï¼Œä»è€Œè¿›å…¥æ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ã€‚</p>
<p>åœ¨ä¸‹ä¸ªå›¾ä¸­ï¼Œæ‹¥æœ‰ä¸€äº›å‡½æ•°ä¸Šä¸‹æ–‡<code>EC1</code>å’Œå…¨å±€ä¸Šä¸‹æ–‡<code>Global EC</code>ï¼Œå½“EC1è¿›å…¥å’Œé€€å‡ºå…¨å±€ä¸Šä¸‹æ–‡çš„æ—¶å€™ä¸‹é¢çš„æ ˆå°†ä¼šå‘ç”Ÿå˜åŒ–ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/ec-stack-changes.png" alt="ec-stack-changes"></p>
<p>è¿™å°±æ˜¯ECMAScriptçš„è¿è¡Œæ—¶ç³»ç»Ÿå¦‚ä½•çœŸæ­£åœ°ç®¡ç†ä»£ç æ‰§è¡Œçš„ã€‚</p>
<p>æ›´å¤šæœ‰å…³ECMAScriptä¸­æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¿¡æ¯å¯ä»¥åœ¨å¯¹åº”çš„<a href="http://dmitrysoshnikov.com/ecmascript/chapter-1-execution-contexts/" target="_blank" rel="external">ç¬¬ä¸€ç«  æ‰§è¡Œä¸Šä¸‹æ–‡</a>ä¸­è·å–ã€‚</p>
<p>åƒæˆ‘ä»¬æ‰€è¯´çš„ï¼Œæ ˆä¸­çš„æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡éƒ½å¯ä»¥ç”¨ä¸€ä¸ªå¯¹è±¡æ¥è¡¨ç¤ºã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ç»“æ„ä»¥åŠä¸€ä¸ªä¸Šä¸‹æ–‡åˆ°åº•éœ€è¦ä»€ä¹ˆ<em>çŠ¶æ€</em>ï¼ˆä»€ä¹ˆå±æ€§ï¼‰æ¥æ‰§è¡Œå®ƒçš„ä»£ç ã€‚</p>
<h2 id="5-æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#5-æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="5.æ‰§è¡Œä¸Šä¸‹æ–‡"></a>5.æ‰§è¡Œä¸Šä¸‹æ–‡</h2><p>ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡å¯ä»¥æŠ½è±¡çš„è¡¨ç¤ºä¸ºä¸€ä¸ªç®€å•çš„å¯¹è±¡ã€‚æ¯ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡æ‹¥æœ‰ä¸€äº›å±æ€§ï¼ˆå¯ä»¥å«ä½œ<em>ä¸Šä¸‹æ–‡çŠ¶æ€</em>ï¼‰ç”¨æ¥è·Ÿè¸ªå’Œå®ƒç›¸å…³çš„ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚åœ¨ä¸‹å›¾ä¸­å±•ç¤ºäº†ä¸€ä¸ªä¸Šä¸‹æ–‡çš„ç»“æ„ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/execution-context.png" alt="execution-context"></p>
<p>é™¤äº†è¿™ä¸‰ä¸ªå¿…éœ€çš„å±æ€§ï¼ˆä¸€ä¸ª<em>å˜é‡å¯¹è±¡</em>ï¼ˆvariable objecï¼‰ï¼Œä¸€ä¸ª<em>this</em>å€¼ä»¥åŠä¸€ä¸ª<em>ä½œç”¨åŸŸé“¾</em>ï¼ˆscope chainï¼‰ï¼‰ä¹‹å¤–ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡å¯ä»¥æ‹¥æœ‰ä»»ä½•é™„åŠ çš„çŠ¶æ€ï¼Œè¿™å–å†³äºå®ç°ã€‚</p>
<p>è®©æˆ‘ä»¬è¯¦ç»†çœ‹çœ‹ä¸Šä¸‹æ–‡ä¸­çš„è¿™äº›é‡è¦çš„å±æ€§ã€‚</p>
<h2 id="6-å˜é‡å¯¹è±¡"><a href="#6-å˜é‡å¯¹è±¡" class="headerlink" title="6.å˜é‡å¯¹è±¡"></a>6.å˜é‡å¯¹è±¡</h2><pre><code>å˜é‡å¯¹è±¡æ˜¯ä¸æ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³çš„æ•°æ®ä½œç”¨åŸŸã€‚å®ƒæ˜¯ä¸€ä¸ªä¸ä¸Šä¸‹æ–‡ç›¸å…³çš„ç‰¹æ®Šå¯¹è±¡ï¼Œå…¶ä¸­å­˜å‚¨äº†åœ¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜ã€‚
</code></pre><p>æ³¨æ„ï¼Œ<em>å‡½æ•°è¡¨è¾¾å¼</em>ï¼ˆä¸<em>å‡½æ•°å£°æ˜</em>ç›¸å¯¹ï¼‰ä¸åŒ…å«åœ¨å˜é‡å¯¹è±¡ä¹‹ä¸­ã€‚</p>
<p>å˜é‡å¯¹è±¡æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µã€‚å¯¹äºä¸åŒçš„ä¸Šä¸‹æ–‡ç±»å‹ï¼Œåœ¨ç‰©ç†ä¸Šï¼Œæ˜¯ä½¿ç”¨ä¸åŒçš„å¯¹è±¡ã€‚æ¯”å¦‚ï¼Œåœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­å˜é‡å¯¹è±¡å°±æ˜¯<em>å…¨å±€å¯¹è±¡æœ¬èº«</em>ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡å…¨å±€å¯¹è±¡çš„å±æ€§åæ¥å…³è”å…¨å±€å˜é‡ï¼‰ã€‚</p>
<p>è®©æˆ‘ä»¬åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è€ƒè™‘ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code>var foo = 10;

function bar() {} // function declaration, FD
(function baz() {}); // function expression, FE

console.log(
  this.foo == foo, // true
  window.bar == bar // true
);

console.log(baz); // ReferenceError, &quot;baz&quot; is not defined
</code></pre><p>ä¹‹åï¼Œå…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼ˆvariable objecï¼Œç®€ç§°VOï¼‰å°†ä¼šæ‹¥æœ‰å¦‚ä¸‹å±æ€§ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/variable-object.png" alt="variable-object"></p>
<p>å†çœ‹ä¸€éï¼Œå‡½æ•°<code>baz</code>æ˜¯ä¸€ä¸ª<em>å‡½æ•°è¡¨è¾¾å¼</em>ï¼Œæ²¡æœ‰è¢«åŒ…å«åœ¨å˜é‡å¯¹è±¡ä¹‹ä¸­ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå½“æˆ‘ä»¬æƒ³è¦åœ¨å‡½æ•°è‡ªèº«ä¹‹å¤–è®¿é—®å®ƒçš„æ—¶å€™ä¼šå‡ºç°<code>ReferenceError</code>ã€‚</p>
<p>æ³¨æ„ï¼Œä¸å…¶ä»–è¯­è¨€ï¼ˆæ¯”å¦‚C/C++ï¼‰ç›¸æ¯”ï¼Œåœ¨ECMAScriptä¸­åªæœ‰å‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­æ‰€å®šä¹‰çš„å˜é‡å’Œå†…éƒ¨å‡½æ•°åœ¨å‡½æ•°å¤–è¾¹æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®åˆ°çš„ï¼Œè€Œä¸”å¹¶ä¸ä¼šæ±¡æŸ“å…¨å±€å˜é‡å¯¹è±¡ã€‚</p>
<p>ä½¿ç”¨<code>eval</code>æˆ‘ä»¬ä¹Ÿä¼šè¿›å…¥ä¸€ä¸ªæ–°çš„ï¼ˆevalç±»å‹ï¼‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚æ— è®ºå¦‚ä½•ï¼Œ<code>eval</code>ä½¿ç”¨å…¨å±€çš„å˜é‡å¯¹è±¡æˆ–è€…ä½¿ç”¨callerï¼ˆæ¯”å¦‚<code>eval</code>è¢«è°ƒç”¨æ—¶æ‰€åœ¨çš„å‡½æ•°ï¼‰çš„å˜é‡å¯¹è±¡ã€‚</p>
<p>é‚£ä¹ˆå‡½æ•°å’Œå®ƒçš„å˜é‡å¯¹è±¡æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿåœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œå˜é‡å¯¹è±¡æ˜¯ä»¥<em>æ´»åŠ¨å¯¹è±¡</em>ï¼ˆactivation objectï¼‰æ¥è¡¨ç¤ºçš„ã€‚</p>
<h2 id="7-æ´»åŠ¨å¯¹è±¡"><a href="#7-æ´»åŠ¨å¯¹è±¡" class="headerlink" title="7.æ´»åŠ¨å¯¹è±¡"></a>7.æ´»åŠ¨å¯¹è±¡</h2><p>å½“ä¸€ä¸ªå‡½æ•°è¢«calleræ‰€<em>è§¦å‘</em>ï¼ˆè¢«è°ƒç”¨ï¼‰ï¼Œä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå«ä½œ<em>æ´»åŠ¨å¯¹è±¡</em>ï¼ˆactivation objectï¼‰å°†ä¼šè¢«åˆ›å»ºã€‚è¿™ä¸ªå¯¹è±¡ä¸­åŒ…å«<em>å½¢å‚</em>å’Œé‚£ä¸ªç‰¹æ®Šçš„<code>argumentså¯¹è±¡</code>ï¼ˆæ˜¯å¯¹å½¢å‚çš„ä¸€ä¸ªæ˜ å°„ï¼Œä½†æ˜¯å€¼æ˜¯é€šè¿‡ç´¢å¼•æ¥è·å–ï¼‰ã€‚<em>æ´»åŠ¨å¯¹è±¡</em>ä¹‹åä¼šåšä¸ºå‡½æ•°ä¸Šä¸‹æ–‡çš„<em>å˜é‡å¯¹è±¡</em>æ¥ä½¿ç”¨ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œå‡½æ•°çš„å˜é‡å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªåŒæ ·ç®€å•çš„å˜é‡å¯¹è±¡ï¼Œä½†æ˜¯é™¤äº†å˜é‡å’Œå‡½æ•°å£°æ˜ä¹‹å¤–ï¼Œå®ƒè¿˜å­˜å‚¨äº†å½¢å‚å’Œ<code>argumentså¯¹è±¡</code>ï¼Œå¹¶å«ä½œ<em>æ´»åŠ¨å¯¹è±¡</em>ã€‚</p>
<p>è€ƒè™‘å¦‚ä¸‹ä¾‹å­ï¼š</p>
<pre><code>function foo(x, y) {
  var z = 30;
  function bar() {} // FD
  (function baz() {}); // FE
}

foo(10, 20);
</code></pre><p>æˆ‘ä»¬çœ‹ä¸‹å‡½æ•°fooçš„ä¸Šä¸‹æ–‡ä¸­çš„æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼Œç®€ç§°AOï¼‰ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/activation-object.png" alt="activation-object"></p>
<p>å¹¶ä¸”<em>å‡½æ•°è¡¨è¾¾å¼</em><code>baz</code>è¿˜æ˜¯æ²¡æœ‰è¢«åŒ…å«åœ¨å˜é‡/æ´»åŠ¨å¯¹è±¡ä¸­ã€‚</p>
<p>å…³äºè¿™ä¸ªä¸»é¢˜æ‰€æœ‰ç»†èŠ‚æ–¹é¢ï¼ˆåƒå˜é‡å’Œå‡½æ•°å£°æ˜çš„<em>æå‡é—®é¢˜</em>ï¼ˆhoistingï¼‰ï¼‰çš„å®Œæ•´æè¿°å¯ä»¥åœ¨åŒåçš„ç« èŠ‚<a href="http://dmitrysoshnikov.com/ecmascript/chapter-2-variable-object/" target="_blank" rel="external">ç¬¬äºŒç«  å˜é‡å¯¹è±¡</a>ä¸­æ‰¾åˆ°ã€‚</p>
<p>æ³¨æ„ï¼Œåœ¨ES5ä¸­<em>å˜é‡å¯¹è±¡</em>å’Œ<em>æ´»åŠ¨å¯¹è±¡</em>è¢«å¹¶å…¥äº†<em>è¯æ³•ç¯å¢ƒ</em>æ¨¡å‹ï¼ˆlexical environments modelï¼‰ï¼Œè¯¦ç»†çš„æè¿°å¯ä»¥åœ¨<a href="http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/" target="_blank" rel="external">å¯¹åº”çš„ç« èŠ‚</a>æ‰¾åˆ°ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å‘ä¸‹ä¸€ä¸ªéƒ¨åˆ†å‰è¿›ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨ECMAScriptä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<em>å†…éƒ¨å‡½æ•°</em>ï¼Œç„¶ååœ¨è¿™äº›å†…éƒ¨å‡½æ•°æˆ‘ä»¬å¯ä»¥å¼•ç”¨çˆ¶å‡½æ•°çš„å˜é‡æˆ–è€…å…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ã€‚å½“æˆ‘ä»¬æŠŠå˜é‡å¯¹è±¡å‘½åä¸ºä¸Šä¸‹æ–‡çš„<em>ä½œç”¨åŸŸå¯¹è±¡</em>ï¼Œä¸ä¸Šé¢è®¨è®ºçš„åŸå‹é“¾ç›¸ä¼¼ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå«ä½œ<em>ä½œç”¨åŸŸé“¾</em>çš„ä¸œè¥¿ã€‚</p>
<h2 id="8-ä½œç”¨åŸŸé“¾"><a href="#8-ä½œç”¨åŸŸé“¾" class="headerlink" title="8.ä½œç”¨åŸŸé“¾"></a>8.ä½œç”¨åŸŸé“¾</h2><pre><code>ä½œç”¨åŸŸé“¾æ˜¯ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨ï¼Œä¸Šä¸‹æ–‡ä»£ç ä¸­å‡ºç°çš„æ ‡è¯†ç¬¦åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚
</code></pre><p>è¿™ä¸ªè§„åˆ™è¿˜æ˜¯ä¸åŸå‹é“¾åŒæ ·ç®€å•ä»¥åŠç›¸ä¼¼ï¼šå¦‚æœä¸€ä¸ªå˜é‡åœ¨å‡½æ•°è‡ªèº«çš„ä½œç”¨åŸŸï¼ˆåœ¨è‡ªèº«çš„å˜é‡/æ´»åŠ¨å¯¹è±¡ï¼‰ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆå°†ä¼šæŸ¥æ‰¾å®ƒçˆ¶å‡½æ•°ï¼ˆå¤–å±‚å‡½æ•°ï¼‰çš„å˜é‡å¯¹è±¡ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p>å°±ä¸Šä¸‹æ–‡è€Œè¨€ï¼Œæ ‡è¯†ç¬¦æŒ‡çš„æ˜¯ï¼š<em>å˜é‡åç§°ï¼Œå‡½æ•°å£°æ˜ï¼Œå½¢å‚</em>ï¼Œç­‰ç­‰ã€‚å½“ä¸€ä¸ªå‡½æ•°åœ¨å…¶ä»£ç ä¸­å¼•ç”¨ä¸€ä¸ªä¸æ˜¯å±€éƒ¨å˜é‡ï¼ˆæˆ–è€…å±€éƒ¨å‡½æ•°æˆ–è€…ä¸€ä¸ªå½¢å‚ï¼‰çš„æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆè¿™ä¸ªæ ‡è¯†ç¬¦å°±å«ä½œ<em>è‡ªç”±å˜é‡</em>ã€‚<em>æœç´¢è¿™äº›è‡ªç”±å˜é‡</em>(free variables)æ­£å¥½å°±è¦ç”¨åˆ°<em>ä½œç”¨åŸŸé“¾</em>ã€‚</p>
<p>åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œ<em>ä½œç”¨åŸŸé“¾</em>æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰<em>çˆ¶ï¼ˆå‡½æ•°ï¼‰å˜é‡å¯¹è±¡</em>__åŠ ä¸Šï¼ˆåœ¨ä½œç”¨åŸŸé“¾å¤´éƒ¨çš„ï¼‰å‡½æ•°<em>è‡ªèº«å˜é‡/æ´»åŠ¨å¯¹è±¡</em>çš„ä¸€ä¸ªåˆ—è¡¨ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªä½œç”¨åŸŸé“¾ä¹Ÿå¯ä»¥åŒ…å«ä»»ä½•å…¶ä»–å¯¹è±¡ï¼Œæ¯”å¦‚ï¼Œåœ¨ä¸Šä¸‹æ–‡æ‰§è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€åŠ å…¥åˆ°ä½œç”¨åŸŸé“¾ä¸­çš„å¯¹è±¡ï¼åƒ<em>withå¯¹è±¡</em>æˆ–è€…ç‰¹æ®Šçš„<em>catchä»å¥</em>ï¼ˆcatch-clausesï¼‰å¯¹è±¡ã€‚</p>
<p>å½“<em>è§£æ</em>ï¼ˆæŸ¥æ‰¾ï¼‰ä¸€ä¸ªæ ‡è¯†ç¬¦çš„æ—¶å€™ï¼Œä¼šä»ä½œç”¨åŸŸé“¾ä¸­çš„æ´»åŠ¨å¯¹è±¡å¼€å§‹æŸ¥æ‰¾ï¼Œç„¶åï¼ˆå¦‚æœè¿™ä¸ªæ ‡è¯†ç¬¦åœ¨å‡½æ•°è‡ªèº«çš„æ´»åŠ¨å¯¹è±¡ä¸­æ²¡æœ‰è¢«æŸ¥æ‰¾åˆ°ï¼‰å‘ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚æŸ¥æ‰¾ï¼é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±å’ŒåŸå‹é“¾ä¸€æ ·ã€‚</p>
<pre><code>var x = 10;

(function foo() {
  var y = 20;
  (function bar() {
    var z = 30;
    // &quot;x&quot; and &quot;y&quot; are &quot;free variables&quot;
    // and are found in the next (after
    // bar&apos;s activation object) object
    // of the bar&apos;s scope chain
    console.log(x + y + z);
  })();
})();
</code></pre><p>æˆ‘ä»¬å¯ä»¥å‡è®¾é€šè¿‡éšå¼çš„<code>__parent__</code>å±æ€§æ¥å’Œä½œç”¨åŸŸé“¾å¯¹è±¡è¿›è¡Œå…³è”ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘ä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªæ–¹æ¡ˆå¯èƒ½åœ¨<a href="http://dmitrysoshnikov.com/ecmascript/chapter-2-variable-object/#feature-of-implementations-property-__parent__" target="_blank" rel="external">çœŸå®çš„Rhinoä»£ç </a>ä¸­ç»è¿‡äº†æµ‹è¯•ï¼Œå¹¶ä¸”è¿™ä¸ªæŠ€æœ¯å¾ˆæ˜ç¡®å¾—è¢«ç”¨äºES5çš„è¯æ³•ç¯å¢ƒä¸­ï¼ˆåœ¨é‚£é‡Œè¢«å«ä½œ<code>outer</code>è¿æ¥ï¼‰ã€‚ä½œç”¨åŸŸé“¾çš„å¦ä¸€ä¸ªè¡¨ç°æ–¹å¼å¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„æ•°ç»„ã€‚åˆ©ç”¨<em><strong>parent</strong></em>æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å›¾æ¥è¡¨ç°ä¸Šé¢çš„ä¾‹å­ï¼ˆå¹¶ä¸”çˆ¶å˜é‡å¯¹è±¡å­˜å‚¨åœ¨å‡½æ•°çš„[[Scope]]å±æ€§ä¸­ï¼‰ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/scope-chain.png" alt="scope-chain"></p>
<p>åœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä½œç”¨åŸŸé“¾å¯ä»¥é€šè¿‡ä½¿ç”¨<code>with</code>è¯­å¥å’Œ<code>catch</code>ä»å¥å¯¹è±¡æ¥å¢å¼ºã€‚å¹¶ä¸”ç”±äºè¿™äº›å¯¹è±¡æ˜¯ç®€å•çš„å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥æ‹¥æœ‰åŸå‹ï¼ˆå’ŒåŸå‹é“¾ï¼‰ã€‚è¿™ä¸ªäº‹å®å¯¼è‡´ä½œç”¨åŸŸé“¾æŸ¥æ‰¾å˜ä¸º<em>ä¸¤ä¸ªç»´åº¦</em>ï¼šï¼ˆ1ï¼‰é¦–å…ˆæ˜¯ä½œç”¨åŸŸé“¾è¿æ¥ï¼Œç„¶åï¼ˆ2ï¼‰åœ¨æ¯ä¸ªä½œç”¨åŸŸé“¾è¿æ¥ä¸Šï¼æ·±å…¥ä½œç”¨åŸŸé“¾è¿æ¥çš„åŸå‹é“¾ï¼ˆå¦‚æœæ­¤è¿æ¥æ‹¥æœ‰åŸå‹ï¼‰ã€‚</p>
<p>å¯¹äºè¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code>Object.prototype.x = 10;

var w = 20;
var y = 30;

// in SpiderMonkey global object
// i.e. variable object of the global
// context inherits from &quot;Object.prototype&quot;,
// so we may refer &quot;not defined global
// variable x&quot;, which is found in
// the prototype chain

console.log(x); // 10

(function foo() {

  // &quot;foo&quot; local variables
  var w = 40;
  var x = 100;

  // &quot;x&quot; is found in the
  // &quot;Object.prototype&quot;, because
  // {z: 50} inherits from it

  with ({z: 50}) {
    console.log(w, x, y , z); // 40, 10, 30, 50
  }

  // after &quot;with&quot; object is removed
  // from the scope chain, &quot;x&quot; is
  // again found in the AO of &quot;foo&quot; context;
  // variable &quot;w&quot; is also local
  console.log(x, w); // 100, 40

  // and that&apos;s how we may refer
  // shadowed global &quot;w&quot; variable in
  // the browser host environment
  console.log(window.w); // 20

})();
</code></pre><p>æˆ‘ä»¬å¯ä»¥ç»™å‡ºå¦‚ä¸‹çš„ç»“æ„ï¼ˆç¡®åˆ‡çš„è¯´ï¼Œåœ¨æˆ‘ä»¬æŸ¥æ‰¾<code>__parent__</code>è¿æ¥ä¹‹å‰ï¼Œé¦–å…ˆæŸ¥æ‰¾<code>__proto__</code>é“¾ï¼‰ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/scope-chain-with.png" alt="scope-chain-with"></p>
<p>æ³¨æ„ï¼Œä¸æ˜¯åœ¨æ‰€æœ‰çš„å®ç°ä¸­å…¨å±€å¯¹è±¡éƒ½æ˜¯ç»§æ‰¿è‡ª<code>Object.prototype</code>ã€‚ä¸Šå›¾ä¸­æè¿°çš„è¡Œä¸ºï¼ˆä»å…¨å±€ä¸Šä¸‹æ–‡ä¸­å¼•ç”¨ã€Œæœªå®šä¹‰ã€çš„å˜é‡xï¼‰å¯ä»¥åœ¨è¯¸å¦‚SpiderMonkeyå¼•æ“ä¸­è¿›è¡Œæµ‹è¯•ã€‚</p>
<p>ç”±äºæ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡éƒ½å­˜åœ¨ï¼Œæ‰€ä»¥åœ¨å†…éƒ¨å‡½æ•°ä¸­è·å–çˆ¶å‡½æ•°ä¸­çš„æ•°æ®æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ï¼æˆ‘ä»¬å°±æ˜¯éå†ä½œç”¨åŸŸé“¾å»è§£æï¼ˆæœå¯»ï¼‰éœ€è¦çš„å˜é‡ã€‚å°±åƒæˆ‘ä»¬ä¸Šè¾¹æåŠçš„ï¼Œåœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ç»“æŸä¹‹åï¼Œå®ƒæ‰€æœ‰çš„çŠ¶æ€å’Œå®ƒè‡ªèº«éƒ½ä¼šè¢«é”€æ¯ã€‚åœ¨åŒä¸€æ—¶é—´çˆ¶å‡½æ•°å¯èƒ½ä¼š<em>è¿”å›</em>ä¸€ä¸ª<em>å†…éƒ¨å‡½æ•°</em>ã€‚è€Œä¸”ï¼Œè¿™ä¸ªè¿”å›çš„å‡½æ•°ä¹‹åå¯èƒ½åœ¨å¦ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­è¢«è°ƒç”¨ã€‚å¦‚æœè‡ªç”±å˜é‡çš„ä¸Šä¸‹æ–‡å·²ç»ã€Œæ¶ˆå¤±ã€äº†ï¼Œé‚£ä¹ˆè¿™æ ·çš„è°ƒç”¨å°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿé€šå¸¸æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªæ¦‚å¿µå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå«ä½œ<em>ï¼ˆè¯æ³•ï¼‰é—­åŒ…</em>ï¼Œå…¶åœ¨ECMAScriptä¸­å°±æ˜¯å’Œ<em>ä½œç”¨åŸŸé“¾</em>çš„æ¦‚å¿µç´§å¯†ç›¸å…³çš„ã€‚</p>
<h2 id="9-é—­åŒ…"><a href="#9-é—­åŒ…" class="headerlink" title="9.é—­åŒ…"></a>9.é—­åŒ…</h2><p>åœ¨ECMAScriptä¸­ï¼Œå‡½æ•°æ˜¯<em>ç¬¬ä¸€çº§</em>ï¼ˆfirst-classï¼‰å¯¹è±¡ã€‚è¿™ä¸ªæœ¯è¯­æ„å‘³ç€å‡½æ•°å¯ä»¥åšä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼ˆåœ¨é‚£ç§æƒ…å†µä¸‹ï¼Œè¿™äº›å‚æ•°å«ä½œã€Œå‡½æ•°ç±»å‹å‚æ•°ã€ï¼ˆfunargsï¼Œæ˜¯â€functional argumentsâ€çš„ç®€ç§°ï¼‰ï¼‰ã€‚æ¥æ”¶ã€Œå‡½æ•°ç±»å‹å‚æ•°ã€çš„å‡½æ•°å«ä½œ<em>é«˜é˜¶å‡½æ•°</em>æˆ–è€…ï¼Œè´´è¿‘æ•°å­¦ä¸€äº›ï¼Œå«ä½œé«˜é˜¶<em>æ“ä½œç¬¦</em>ã€‚åŒæ ·å‡½æ•°ä¹Ÿå¯ä»¥ä»å…¶ä»–å‡½æ•°ä¸­è¿”å›ã€‚è¿”å›å…¶ä»–å‡½æ•°çš„å‡½æ•°å«ä½œ<em>ä»¥å‡½æ•°ä¸ºå€¼</em>ï¼ˆfunction valuedï¼‰çš„å‡½æ•°ï¼ˆæˆ–è€…å«ä½œæ‹¥æœ‰å‡½æ•°ç±»<em>å€¼çš„å‡½æ•°</em>ï¼ˆfunctions with functional valueï¼‰ï¼‰ã€‚</p>
<p>è¿™æœ‰ä¸¤ä¸ªåœ¨æ¦‚å¿µä¸Šä¸ã€Œå‡½æ•°ç±»å‹å‚æ•°ï¼ˆfunargsï¼‰ã€å’Œã€Œå‡½æ•°ç±»å‹å€¼ï¼ˆfunctionalã€€valuesï¼‰ã€ç›¸å…³çš„é—®é¢˜ã€‚å¹¶ä¸”è¿™ä¸¤ä¸ªå­é—®é¢˜åœ¨â€<em>Funarg problem</em>â€œï¼ˆæˆ–è€…å«ä½œâ€functional argumentâ€é—®é¢˜ï¼‰ä¸­å¾ˆæ™®éã€‚ä¸ºäº†è§£å†³<em>æ•´ä¸ªâ€funarg problemâ€</em>ï¼Œ<em>é—­åŒ…</em>ï¼ˆclosureï¼‰çš„æ¦‚å¿µè¢«åˆ›é€ äº†å‡ºæ¥ã€‚æˆ‘ä»¬è¯¦ç»†çš„æè¿°ä¸€ä¸‹è¿™ä¸¤ä¸ªå­é—®é¢˜ï¼ˆæˆ‘ä»¬å°†ä¼šçœ‹åˆ°è¿™ä¸¤ä¸ªé—®é¢˜åœ¨ECMAScriptä¸­éƒ½æ˜¯ä½¿ç”¨å›¾ä¸­æ‰€æåˆ°çš„å‡½æ•°çš„[[Scope]]å±æ€§æ¥è§£å†³çš„ï¼‰ã€‚</p>
<p>ã€Œfunargé—®é¢˜ã€çš„ç¬¬ä¸€ä¸ªå­é—®é¢˜æ˜¯<em>ã€Œå‘ä¸Šfunargé—®é¢˜ã€</em>ï¼ˆupward funarg problemï¼‰ã€‚å®ƒä¼šåœ¨å½“ä¸€ä¸ªå‡½æ•°ä»å¦ä¸€ä¸ªå‡½æ•°å‘ä¸Šè¿”å›ï¼ˆåˆ°å¤–å±‚ï¼‰å¹¶ä¸”ä½¿ç”¨ä¸Šé¢æ‰€æåˆ°çš„<em>è‡ªç”±å˜é‡çš„</em>æ—¶å€™å‡ºç°ã€‚ä¸ºäº†åœ¨<em>å³ä½¿çˆ¶å‡½æ•°ä¸Šä¸‹æ–‡ç»“æŸ</em>çš„æƒ…å†µä¸‹ä¹Ÿèƒ½è®¿é—®å…¶ä¸­çš„å˜é‡ï¼Œå†…éƒ¨å‡½æ•°åœ¨<em>è¢«åˆ›å»ºçš„æ—¶å€™</em>ä¼šåœ¨å®ƒçš„[[Scope]]å±æ€§ä¸­ä¿å­˜çˆ¶å‡½æ•°çš„<em>ä½œç”¨åŸŸé“¾</em>ã€‚æ‰€ä»¥å½“å‡½æ•°è¢«<em>è°ƒç”¨</em>çš„æ—¶å€™ï¼Œå®ƒä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ä¼šè¢«æ ¼å¼åŒ–æˆæ´»åŠ¨å¯¹è±¡ä¸[[Scope]]å±æ€§çš„å’Œï¼ˆå®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬åˆšåˆšåœ¨ä¸Šå›¾ä¸­æ‰€çœ‹åˆ°çš„ï¼‰ï¼š</p>
<pre><code>Scope chain = Activation object + [[Scope]]
</code></pre><p>å†æ¬¡æ³¨æ„è¿™ä¸ªå…³é”®ç‚¹ï¼ç¡®åˆ‡çš„è¯´åœ¨<em>åˆ›å»ºæ—¶åˆ»</em>ï¼å‡½æ•°ä¼šä¿å­˜<em>çˆ¶å‡½æ•°çš„</em>ä½œç”¨åŸŸé“¾ï¼Œå› ä¸ºç¡®åˆ‡çš„è¯´è¿™ä¸ª<em>ä¿å­˜ä¸‹æ¥çš„ä½œç”¨åŸŸé“¾</em>å°†ä¼šåœ¨æœªæ¥çš„å‡½æ•°è°ƒç”¨æ—¶ç”¨æ¥æŸ¥æ‰¾å˜é‡ã€‚</p>
<pre><code>function foo() {
  var x = 10;
  return function bar() {
    console.log(x);
  };
}

// &quot;foo&quot; returns also a function
// and this returned function uses
// free variable &quot;x&quot;

var returnedFunction = foo();

// global variable &quot;x&quot;
var x = 20;

// execution of the returned function

returnedFunction(); // 10, but not 20
</code></pre><p>è¿™ä¸ªç±»å‹çš„ä½œç”¨åŸŸå«ä½œ<em>é™æ€ï¼ˆæˆ–è€…è¯æ³•ï¼‰ä½œç”¨åŸŸ</em>ã€‚æˆ‘ä»¬çœ‹åˆ°å˜é‡xåœ¨è¿”å›çš„<code>bar</code>å‡½æ•°çš„[[Scope]]å±æ€§ä¸­è¢«æ‰¾åˆ°ã€‚é€šå¸¸æ¥è¯´ï¼Œä¹Ÿå­˜åœ¨<em>åŠ¨æ€ä½œç”¨åŸŸ</em>ï¼Œé‚£ä¹ˆä¸Šé¢ä¾‹å­ä¸­çš„å˜é‡xå°†ä¼šè¢«è§£ææˆ20ï¼Œè€Œä¸æ˜¯10ã€‚ä½†æ˜¯ï¼ŒåŠ¨æ€ä½œç”¨åŸŸåœ¨ECMAScriptä¸­æ²¡æœ‰è¢«ä½¿ç”¨ã€‚</p>
<p>ã€Œfunargé—®é¢˜ã€çš„ç¬¬äºŒä¸ªéƒ¨åˆ†æ˜¯<em>ã€Œå‘ä¸‹funargé—®é¢˜ã€</em>ã€‚è¿™ç§æƒ…å†µä¸‹å¯èƒ½ä¼šå­˜åœ¨ä¸€ä¸ªçˆ¶ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯åœ¨è§£ææ ‡è¯†ç¬¦çš„æ—¶å€™å¯èƒ½ä¼šæ¨¡ç³Šä¸æ¸…ã€‚é—®é¢˜æ˜¯ï¼šæ ‡è¯†ç¬¦è¯¥ä½¿ç”¨<em>å“ªä¸ªä½œç”¨åŸŸ</em>çš„å€¼ï¼ä»¥é™æ€çš„æ–¹å¼å­˜å‚¨åœ¨å‡½æ•°åˆ›å»ºæ—¶åˆ»çš„è¿˜æ˜¯åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä»¥åŠ¨æ€æ–¹å¼ç”Ÿæˆçš„ï¼ˆæ¯”å¦‚<em>caller</em>çš„ä½œç”¨åŸŸï¼‰ï¼Ÿä¸ºäº†é¿å…è¿™ç§æ¨¡æ£±ä¸¤å¯çš„æƒ…å†µå¹¶å½¢æˆé—­åŒ…ï¼Œ<em>é™æ€ä½œç”¨åŸŸ</em>è¢«é‡‡ç”¨ï¼š</p>
<pre><code>// global &quot;x&quot;
var x = 10;

// global function
function foo() {
  console.log(x);
}

(function (funArg) {

  // local &quot;x&quot;
  var x = 20;

  // there is no ambiguity,
  // because we use global &quot;x&quot;,
  // which was statically saved in
  // [[Scope]] of the &quot;foo&quot; function,
  // but not the &quot;x&quot; of the caller&apos;s scope,
  // which activates the &quot;funArg&quot;

  funArg(); // 10, but not 20

})(foo); // pass &quot;down&quot; foo as a &quot;funarg&quot;
</code></pre><p>æˆ‘ä»¬å¯ä»¥æ–­å®š<em>é™æ€ä½œç”¨åŸŸ</em>æ˜¯ä¸€é—¨è¯­è¨€æ‹¥æœ‰<em>é—­åŒ…çš„å¿…éœ€æ¡ä»¶</em>ã€‚ä½†æ˜¯ï¼Œä¸€äº›è¯­è¨€å¯èƒ½ä¼šåŒæ—¶æä¾›åŠ¨æ€å’Œé™æ€ä½œç”¨åŸŸï¼Œå…è®¸ç¨‹åºå‘˜åšé€‰æ‹©ï¼ä»€ä¹ˆåº”è¯¥åŒ…å«ï¼ˆclosureï¼‰åœ¨å†…å’Œä»€ä¹ˆä¸åº”åŒ…å«åœ¨å†…ã€‚ç”±äºåœ¨ECMAScriptä¸­åªä½¿ç”¨äº†é™æ€ä½œç”¨åŸŸï¼ˆæ¯”å¦‚æˆ‘ä»¬å¯¹äº<code>funargé—®é¢˜</code>çš„ä¸¤ä¸ªå­é—®é¢˜éƒ½æœ‰è§£å†³æ–¹æ¡ˆï¼‰ï¼Œæ‰€ä»¥ç»“è®ºæ˜¯ï¼š<em>ECMAScriptå®Œå…¨æ”¯æŒé—­åŒ…</em>ï¼ŒæŠ€æœ¯ä¸Šæ˜¯é€šè¿‡å‡½æ•°çš„[[Scope]]å±æ€§å®ç°çš„ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ç»™é—­åŒ…ä¸‹ä¸€ä¸ªå‡†ç¡®çš„å®šä¹‰ï¼š</p>
<pre><code>é—­åŒ…æ˜¯ä¸€ä¸ªä»£ç å—ï¼ˆåœ¨ECMAScriptæ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰å’Œä»¥é™æ€æ–¹å¼/è¯æ³•æ–¹å¼è¿›è¡Œå­˜å‚¨çš„æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ä¸€ä¸ªé›†åˆä½“ã€‚æ‰€ä»¥ï¼Œé€šè¿‡è¿™äº›å­˜å‚¨çš„ä½œç”¨åŸŸï¼Œå‡½æ•°å¯ä»¥å¾ˆå®¹æ˜“çš„æ‰¾åˆ°è‡ªç”±å˜é‡ã€‚
</code></pre><p>æ³¨æ„ï¼Œç”±äº<em>æ¯ä¸ª</em>ï¼ˆæ ‡å‡†çš„ï¼‰å‡½æ•°éƒ½åœ¨åˆ›å»ºçš„æ—¶å€™ä¿å­˜äº†[[Scope]]ï¼Œæ‰€ä»¥ç†è®ºä¸Šæ¥è®²ï¼ŒECMAScriptä¸­çš„<em>æ‰€æœ‰å‡½æ•°</em>éƒ½æ˜¯<em>é—­åŒ…</em>ã€‚</p>
<p>å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é‡è¦äº‹æƒ…æ˜¯ï¼Œå¤šä¸ªå‡½æ•°å¯èƒ½æ‹¥æœ‰<em>ç›¸åŒçš„çˆ¶ä½œç”¨åŸŸ</em>ï¼ˆè¿™æ˜¯å¾ˆå¸¸è§çš„æƒ…å†µï¼Œæ¯”å¦‚å½“æˆ‘ä»¬æ‹¥æœ‰ä¸¤ä¸ªå†…éƒ¨/å…¨å±€å‡½æ•°çš„æ—¶å€™ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>[[Scope]]</code>å±æ€§ä¸­å­˜å‚¨çš„å˜é‡æ˜¯åœ¨æ‹¥æœ‰ç›¸åŒçˆ¶ä½œç”¨åŸŸé“¾çš„<em>æ‰€æœ‰å‡½æ•°ä¹‹é—´å…±äº«</em>çš„ã€‚ä¸€ä¸ªé—­åŒ…å¯¹å˜é‡è¿›è¡Œçš„ä¿®æ”¹ä¼š<em>ä½“ç°</em>åœ¨å¦ä¸€ä¸ªé—­åŒ…å¯¹è¿™äº›å˜é‡çš„è¯»å–ä¸Šï¼š</p>
<pre><code>function baz() {
  var x = 1;
  return {
    foo: function foo() { return ++x; },
    bar: function bar() { return --x; }
  };
}

var closures = baz();

console.log(
  closures.foo(), // 2
  closures.bar()  // 1
);
</code></pre><p>ä»¥ä¸Šä»£ç å¯ä»¥é€šè¿‡ä¸‹å›¾è¿›è¡Œè¯´æ˜ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/shared-scope.png" alt="shared-scope"></p>
<p>ç¡®åˆ‡æ¥è¯´è¿™ä¸ªç‰¹æ€§åœ¨å¾ªç¯ä¸­åˆ›å»ºå¤šä¸ªå‡½æ•°çš„æ—¶å€™ä¼šä½¿äººéå¸¸å›°æƒ‘ã€‚åœ¨åˆ›å»ºçš„å‡½æ•°ä¸­ä½¿ç”¨å¾ªç¯è®¡æ•°å™¨çš„æ—¶å€™ï¼Œä¸€äº›ç¨‹åºå‘˜ç»å¸¸ä¼šå¾—åˆ°éé¢„æœŸçš„ç»“æœï¼Œæ‰€æœ‰å‡½æ•°ä¸­çš„è®¡æ•°å™¨éƒ½æ˜¯<em>åŒæ ·</em>çš„å€¼ã€‚ç°åœ¨æ˜¯åˆ°äº†è¯¥æ­å¼€è°œåº•çš„æ—¶å€™äº†ï¼å› ä¸ºæ‰€æœ‰è¿™äº›å‡½æ•°æ‹¥æœ‰åŒä¸€ä¸ª<code>[[Scope]]</code>ï¼Œè¿™ä¸ªå±æ€§ä¸­çš„å¾ªç¯è®¡æ•°å™¨çš„å€¼æ˜¯æœ€åä¸€æ¬¡æ‰€èµ‹çš„å€¼ã€‚</p>
<pre><code>var data = [];

for (var k = 0; k &lt; 3; k++) {
  data[k] = function () {
    alert(k);
  };
}

data[0](); // 3, but not 0
data[1](); // 3, but not 1
data[2](); // 3, but not 2
</code></pre><p>è¿™é‡Œæœ‰å‡ ç§æŠ€æœ¯å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…¶ä¸­ä¸€ç§æ˜¯åœ¨ä½œç”¨åŸŸé“¾ä¸­æä¾›ä¸€ä¸ªé¢å¤–çš„å¯¹è±¡ï¼æ¯”å¦‚ï¼Œä½¿ç”¨é¢å¤–å‡½æ•°ï¼š</p>
<pre><code>var data = [];

for (var k = 0; k &lt; 3; k++) {
  data[k] = (function (x) {
    return function () {
      alert(x);
    };
  })(k); // pass &quot;k&quot; value
}

// now it is correct
data[0](); // 0
data[1](); // 1
data[2](); // 2
</code></pre><p>å¯¹é—­åŒ…ç†è®ºå’Œå®ƒä»¬çš„å®é™…åº”ç”¨æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥åœ¨<a href="http://dmitrysoshnikov.com/ecmascript/chapter-6-closures/" target="_blank" rel="external">ç¬¬å…­ç«  é—­åŒ…</a>ä¸­æ‰¾åˆ°é¢å¤–çš„ä¿¡æ¯ã€‚å¦‚æœæƒ³è·å–æ›´å¤šå…³äºä½œç”¨åŸŸé“¾çš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹åŒåçš„<a href="http://dmitrysoshnikov.com/ecmascript/chapter-4-scope-chain/" target="_blank" rel="external">ç¬¬å››ç«  ä½œç”¨åŸŸé“¾</a>ã€‚</p>
<p>ç„¶åæˆ‘ä»¬ç§»åŠ¨åˆ°ä¸‹ä¸ªéƒ¨åˆ†ï¼Œè€ƒè™‘ä¸€ä¸‹æ‰§è¡Œä¸Šä¸‹æ–‡çš„æœ€åä¸€ä¸ªå±æ€§ã€‚è¿™å°±æ˜¯å…³äº<code>this</code>å€¼çš„æ¦‚å¿µã€‚</p>
<h2 id="10-This"><a href="#10-This" class="headerlink" title="10.This"></a>10.This</h2><pre><code>thisæ˜¯ä¸€ä¸ªä¸æ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³çš„ç‰¹æ®Šå¯¹è±¡ã€‚å› æ­¤ï¼Œå®ƒå¯ä»¥å«ä½œä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯ç”¨æ¥æŒ‡æ˜æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯åœ¨å“ªä¸ªä¸Šä¸‹æ–‡ä¸­è¢«è§¦å‘çš„å¯¹è±¡ï¼‰ã€‚
</code></pre><p><em>ä»»ä½•å¯¹è±¡</em>éƒ½å¯ä»¥åšä¸ºä¸Šä¸‹æ–‡ä¸­çš„<code>this</code>çš„å€¼ã€‚æˆ‘æƒ³å†ä¸€æ¬¡æ¾„æ¸…ï¼Œåœ¨ä¸€äº›å¯¹ECMAScriptæ‰§è¡Œä¸Šä¸‹æ–‡å’Œéƒ¨åˆ†<code>this</code>çš„æè¿°ä¸­çš„æ‰€äº§ç”Ÿè¯¯è§£ã€‚thisç»å¸¸è¢«é”™è¯¯çš„æè¿°æˆæ˜¯å˜é‡å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚è¿™ç±»é”™è¯¯å­˜åœ¨äºæ¯”å¦‚åƒè¿™æœ¬ä¹¦ä¸­ï¼ˆå³ä½¿å¦‚æ­¤ï¼Œè¿™æœ¬ä¹¦çš„ç›¸å…³ç« èŠ‚è¿˜æ˜¯ååˆ†ä¸é”™çš„ï¼‰ã€‚å†é‡å¤ä¸€æ¬¡ï¼š</p>
<pre><code>thisæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯å˜é‡å¯¹è±¡çš„ä¸€ä¸ªå±æ€§
</code></pre><p>è¿™ä¸ªç‰¹æ€§éå¸¸é‡è¦ï¼Œå› ä¸º<em>ä¸å˜é‡ç›¸åï¼Œ<code>this</code>ä»ä¸ä¼šå‚ä¸åˆ°æ ‡è¯†ç¬¦è§£æè¿‡ç¨‹</em>ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ä»£ç ä¸­å½“è®¿é—®<code>this</code>çš„æ—¶å€™ï¼Œå®ƒçš„å€¼æ˜¯<em>ç›´æ¥</em>ä»æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è·å–çš„ï¼Œå¹¶<em>ä¸éœ€è¦ä»»ä½•ä½œç”¨åŸŸé“¾æŸ¥æ‰¾</em>ã€‚<code>this</code>çš„å€¼åªåœ¨<em>è¿›å…¥ä¸Šä¸‹æ–‡</em>çš„æ—¶å€™è¿›è¡Œ<em>ä¸€æ¬¡</em>ç¡®å®šã€‚</p>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä¸ECMAScriptç›¸åï¼Œæ¯”å¦‚ï¼ŒPythonçš„æ–¹æ³•éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªè¢«å½“ä½œç®€å•å˜é‡çš„<code>self</code>å‚æ•°ï¼Œè¿™ä¸ªå˜é‡çš„å€¼åœ¨å„ä¸ªæ–¹æ³•ä¸­æ˜¯ç›¸åŒçš„çš„å¹¶ä¸”åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥è¢«æ›´æ”¹æˆå…¶ä»–å€¼ã€‚åœ¨ECMAScriptä¸­ï¼Œç»™<code>this</code>èµ‹ä¸€ä¸ªæ–°å€¼<em>æ˜¯ä¸å¯èƒ½çš„</em>ï¼Œå› ä¸ºï¼Œå†é‡å¤ä¸€éï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªå˜é‡å¹¶ä¸”ä¸å­˜åœ¨äºå˜é‡å¯¹è±¡ä¸­ã€‚</p>
<p>åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>this</code>å°±ç­‰äº<em>å…¨å±€å¯¹è±¡æœ¬èº«</em>ï¼ˆè¿™æ„å‘³ç€ï¼Œè¿™é‡Œçš„thisç­‰äº<em>å˜é‡å¯¹è±¡</em>ï¼‰ï¼š</p>
<pre><code>var x = 10;

console.log(
  x, // 10
  this.x, // 10
  window.x // 10
);
</code></pre><p>åœ¨å‡½æ•°ä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹ï¼Œå¯¹<em>å‡½æ•°çš„æ¯æ¬¡è°ƒç”¨</em>ï¼Œå…¶ä¸­çš„<code>this</code>å€¼å¯èƒ½æ˜¯<em>ä¸åŒçš„</em>ã€‚è¿™ä¸ª<code>this</code>å€¼æ˜¯é€šè¿‡<em>å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼</em>ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°è¢«è°ƒç”¨çš„æ–¹å¼ï¼‰çš„å½¢å¼ç”±<em>caller</em>æ‰€æä¾›çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢çš„å‡½æ•°<code>foo</code>æ˜¯ä¸€ä¸ª<em>callee</em>ï¼Œåœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­è¢«è°ƒç”¨ï¼Œæ­¤ä¸Šä¸‹æ–‡ä¸ºcallerã€‚è®©æˆ‘ä»¬é€šè¿‡ä¾‹å­çœ‹ä¸€ä¸‹ï¼Œå¯¹äºä¸€ä¸ªä»£ç ç›¸åŒçš„å‡½æ•°ï¼Œ<code>this</code>å€¼æ˜¯å¦‚ä½•åœ¨ä¸åŒçš„è°ƒç”¨ä¸­ï¼ˆå‡½æ•°è§¦å‘çš„ä¸åŒæ–¹å¼ï¼‰ï¼Œç”±callerç»™å‡º<em>ä¸åŒçš„</em>ç»“æœçš„ï¼š</p>
<pre><code>// the code of the &quot;foo&quot; function
// never changes, but the &quot;this&quot; value
// differs in every activation

function foo() {
  alert(this);
}

// caller activates &quot;foo&quot; (callee) and
// provides &quot;this&quot; for the callee

foo(); // global object
foo.prototype.constructor(); // foo.prototype

var bar = {
  baz: foo
};

bar.baz(); // bar

(bar.baz)(); // also bar
(bar.baz = bar.baz)(); // but here is global object
(bar.baz, bar.baz)(); // also global object
(false || bar.baz)(); // also global object

var otherFoo = bar.baz;
otherFoo(); // again global object
</code></pre><p>ä¸ºäº†æ·±å…¥ç†è§£<code>this</code>ä¸ºä»€ä¹ˆï¼ˆå¹¶ä¸”æ›´æœ¬è´¨ä¸€äº›ï¼<em>å¦‚ä½•</em>ï¼‰åœ¨æ¯ä¸ªå‡½æ•°è°ƒç”¨ä¸­å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½ å¯ä»¥é˜…è¯»<a href="http://dmitrysoshnikov.com/ecmascript/chapter-3-this/" target="_blank" rel="external">ç¬¬ä¸‰ç«  This</a>ã€‚åœ¨é‚£é‡Œï¼Œä¸Šé¢æ‰€æåˆ°çš„æƒ…å†µéƒ½ä¼šæœ‰è¯¦ç»†çš„è®¨è®ºã€‚</p>
<p>æ€»ç»“</p>
<p>é€šè¿‡æœ¬æ–‡æˆ‘ä»¬å®Œæˆäº†å¯¹æ¦‚è¦çš„ç»¼è¿°ã€‚å°½ç®¡ï¼Œå®ƒçœ‹èµ·æ¥å¹¶ä¸åƒæ˜¯ã€Œæ¦‚è¦ã€;)ã€‚å¯¹æ‰€æœ‰è¿™äº›ä¸»é¢˜è¿›è¡Œå®Œå…¨çš„è§£é‡Šéœ€è¦ä¸€æœ¬å®Œæ•´çš„ä¹¦ã€‚æˆ‘ä»¬åªæ˜¯æ²¡æœ‰æ¶‰åŠåˆ°ä¸¤ä¸ªå¤§çš„ä¸»é¢˜ï¼š<em>å‡½æ•°</em>ï¼ˆå’Œä¸åŒå‡½æ•°ä¹‹é—´çš„åŒºåˆ«ï¼Œæ¯”å¦‚ï¼Œ<em>å‡½æ•°å£°æ˜</em>å’Œ<em>å‡½æ•°è¡¨è¾¾å¼</em>ï¼‰å’ŒECMAScriptä¸­æ‰€ä½¿ç”¨çš„<em>æ±‚å€¼ç­–ç•¥</em>(evaluation strategy )ã€‚è¿™ä¸¤ä¸ªä¸»é¢˜æ˜¯å¯ä»¥ES3ç³»åˆ—çš„åœ¨å¯¹åº”ç« èŠ‚æ‰¾åˆ°ï¼š<a href="http://dmitrysoshnikov.com/ecmascript/chapter-5-functions/" target="_blank" rel="external">ç¬¬äº”ç«  å‡½æ•°</a>å’Œ<a href="http://dmitrysoshnikov.com/ecmascript/chapter-8-evaluation-strategy/" target="_blank" rel="external">ç¬¬å…«ç«  æ±‚å€¼ç­–ç•¥</a>ã€‚</p>
<p>å¦‚æœä½ æœ‰ç•™è¨€ï¼Œé—®é¢˜æˆ–è€…è¡¥å……ï¼Œæˆ‘å°†ä¼šå¾ˆä¹æ„åœ°åœ¨è¯„è®ºä¸­è®¨è®ºå®ƒä»¬ã€‚</p>
<p>ç¥å­¦ä¹ ECMAScriptå¥½è¿ï¼</p>
<p>ä½œè€…ï¼šDmitry A. Soshnikov<br>å‘å¸ƒäºï¼š2010-09-02</p>
<p>(å®Œ)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2015/12/15/DiveIntoJs_module_pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/12/15/DiveIntoJs_module_pattern/" itemprop="url">æ·±å…¥ç†è§£Javascriptï¼šæ¨¡å—æ¨¡å¼</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-12-15T00:00:00+08:00">
                2015-12-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ¬æ–‡è½¬è½½è‡ªå‰ç«¯ä¹±ç‚–ï¼š<a href="http://www.html-js.com/article/Study-JavaScript-Javascript-module-every-day" target="_blank" rel="external">Javascript æ¨¡å—æ¨¡å¼</a></p>
<h2 id="1-Javascript-æ¨¡å—æ¨¡å¼"><a href="#1-Javascript-æ¨¡å—æ¨¡å¼" class="headerlink" title="1.Javascript æ¨¡å—æ¨¡å¼"></a>1.Javascript æ¨¡å—æ¨¡å¼</h2><p>å‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªå°å‹çš„Jsåº“ï¼Œç›®çš„æ˜¯ç”¨æ¥å¢åŠ ä¸€ä¸ªæ•°å­—ï¼š</p>
<pre><code>var jspy = {
  count: 0,

  incrementCount: function() {
    this.count++;
  },

  decrementCount: function() {
    this.count--;
  },

  getCount: function() {
    return this.count;
  }

};
</code></pre><p>ä½†æ˜¯ï¼Œä½¿ç”¨è¿™ä¸ªjsåº“çš„äººå¯ä»¥ç”¨jspy.count = 5 çš„æ–¹æ³•æ¥æ”¹å˜è¿™ä¸ªå€¼ã€‚å¹¶ä¸æ˜¯æˆ‘ä»¬çš„æœ€åˆç›®çš„ã€‚åœ¨å…¶ä»–çš„ç¼–ç¨‹è¯­è¨€ä¸­ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œä½†æ˜¯Javascriptå¹¶ä¸èƒ½â€œçœŸæ­£â€å®šä¹‰ç§æœ‰å˜é‡ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ“ä½œJavascriptæ¥å®ç°ï¼Œè¿™å°±å¼•å‡ºäº†ä¸€ä¸ªæœ€æµè¡Œçš„Javascriptè®¾è®¡æ¨¡å¼ï¼Œæ¨¡å—æ¨¡å¼ã€‚</p>
<p>é’ˆå¯¹ä¸Šé¢é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<pre><code>var jspy = (function() {
  var _count = 0;

  var incrementCount = function() {
    _count++;
  }

  var getCount = function() {
    return _count;
  }
  return {
    incrementCount: incrementCount,
    getCount: getCount
  };

})();
</code></pre><p>é¦–å…ˆæˆ‘ä»¬åˆ›é€ ä¸€ä¸ª_countå˜é‡ï¼Œä¸‹åˆ’çº¿è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªç§æœ‰å˜é‡ã€‚å†Javascriptä¸­ä¸‹åˆ’çº¿å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…çš„æ„ä¹‰ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€ä¸ªç”¨æ¥æ ‡æ˜ç§æœ‰å˜é‡çš„æ™®éç”¨æ³•ã€‚ç°åœ¨å‡½æ•°å°±å¯ä»¥æ“çºµã€è¿”å›å˜é‡äº†ï¼š</p>
<p>ç„¶è€Œï¼Œä½ æ³¨æ„åˆ°äº†æˆ‘å§æ•´ä¸ªåº“åŒ…å«åœ¨äº†ä¸€ä¸ªè‡ªè°ƒç”¨åŒ¿åå‡½æ•°ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é©¬ä¸Šè¢«æ‰§è¡Œçš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°è¿è¡Œï¼Œå®šä¹‰äº†å‡½æ•°å’Œå˜é‡ç„¶ååˆ°äº†return {}çš„éƒ¨åˆ†ï¼Œå®ƒå‘Šè¯‰å‡½æ•°å°†å…¶è¿”å›ç»™å˜é‡jspyï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œæš´éœ²ç»™ç”¨æˆ·ã€‚æˆ‘ä»¬æš´éœ²ä¸¤ä¸ªå‡½æ•°è€Œä¸æ˜¯_countå˜é‡ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹æ“ä½œï¼š</p>
<pre><code>jspy.incrementCount();
jspy.getCount();
</code></pre><p>ä½†æ˜¯å½“æˆ‘ä»¬è¯•å›¾è¿›è¡Œå¦‚ä¸‹æ“ä½œæ—¶ï¼š</p>
<pre><code>jspy._count; //undefined
</code></pre><p>å®ƒè¿”å›undefinedã€‚</p>
<p>å¯¹äºä¸Šé¢çš„è¿™ç§è®¾è®¡æ¨¡å¼æœ‰è®¸å¤šä¸åŒçš„å®ç°æ–¹æ³•ã€‚æœ‰äººå–œæ¬¢åœ¨return ä¸­å®šä¹‰å‡½æ•°ï¼š</p>
<pre><code>var jspy = (function() {
    var _count = 0;

    return {
      incrementCount: function() {
        _count++;
      },
      getCount: function() {
        return _count;
      }
    };
})();   
</code></pre><p>å—åˆ°ä¸Šé¢ä¾‹å­çš„å¯å‘ï¼ŒCHristian Heilmannæå‡ºäº†Revealing Module Patternã€‚ä»–çš„æ–¹æ³•æ˜¯å°†æ‰€æœ‰æ–¹æ³•å®šä¹‰ä¸ºç§æœ‰å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åœ¨returnä¸­å®šä¹‰ï¼Œä½†æ˜¯åœ¨é‚£é‡Œæš´éœ²ç»™ç”¨æˆ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>var jspy = (function() {
  var _count = 0;
  var incrementCount = function() {
    _count++;
  };
  var resetCount = function() {
    _count = 0;
  };
  var getCount = function() {
    return _count;
  };
  return {
    add: incrementCount,
    reset: resetCount,
    get: getCount
  };
})();
</code></pre><p>è¿™ç§è®¾è®¡æ¨¡å¼æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li><p>é¦–å…ˆï¼Œå®ƒä½¿æˆ‘ä»¬æ›´å®¹æ˜“çš„äº†è§£æš´éœ²çš„å‡½æ•°ã€‚å½“ä½ ä¸åœ¨returnä¸­å®šä¹‰å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬èƒ½è½»æ¾çš„äº†è§£åˆ°æ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªæš´éœ²çš„å‡½æ•°ï¼Œè¿™æ—¶æˆ‘ä»¬é˜…è¯»ä»£ç æ›´åŠ è½»æ¾ã€‚</p>
</li>
<li><p>å…¶æ¬¡ï¼Œä½ å¯ä»¥ç”¨ç®€çŸ­çš„åå­—ï¼ˆä¾‹å¦‚ addï¼‰æ¥æš´éœ²å‡½æ•°ï¼Œä½†åœ¨å®šä¹‰çš„æ—¶å€™ä»ç„¶å¯ä»¥ä½¿ç”¨å†—ä½™çš„å®šä¹‰æ–¹æ³•ï¼ˆä¾‹å¦‚ incrementCountï¼‰ã€‚   </p>
</li>
</ul>
<p>ç›¸å…³é˜…è¯»ï¼š<a href="http://www.ruanyifeng.com/blog/2012/10/javascript_module.html" target="_blank" rel="external">é˜®ä¸€å³°ï¼šJavascriptæ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆä¸€ï¼‰ï¼šæ¨¡å—çš„å†™æ³•</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2015/11/19/DiveIntoJs_hoisted/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/19/DiveIntoJs_hoisted/" itemprop="url">æ·±å…¥ç†è§£Javascriptï¼š å£°æ˜æå‡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-11-19T00:00:00+08:00">
                2015-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨JSç¨‹åºä¸­ï¼Œæˆ‘ä»¬éƒ½ä¼šéœ€è¦å£°æ˜å˜é‡å’Œå‡½æ•°ï¼Œå˜é‡å£°æ˜å’Œå‡½æ•°å£°æ˜æœ‰äº›ä»€ä¹ˆè¦æ³¨æ„çš„å‘¢ï¼Ÿ</p>
<p>ä»Šå¤©å°±è®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿã€‚</p>
<p>å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>var scope = &apos;global&apos;;
function checkscope(){
    return scope;
    var scope = &apos;local&apos;;
}
var result = checkscope();
console.log(result);
</code></pre><p>ä¸Šé¢ä¾‹å­æœ€åæ‰“å°å‡ºæ¥çš„resultæ˜¯ä»€ä¹ˆå‘¢ï¼Œå¯èƒ½æœ‰äººä¼šè¯´æ˜¯globalï¼Œæœ‰äººä¼šè¯´æ˜¯localï¼Œå®é™…ç»“æœå´æ˜¯undifinedï¼›</p>
<p>æœ€å¼€å§‹æˆ‘çœŸæ˜¯è¢«æ‰“å‡»åˆ°äº†ï¼Œæ‰“å‡»è¿‡åè¿˜æ˜¯è¦ææ˜ç™½å•Šã€‚</p>
<h2 id="1-ä½œç”¨åŸŸ"><a href="#1-ä½œç”¨åŸŸ" class="headerlink" title="1.ä½œç”¨åŸŸ"></a>1.ä½œç”¨åŸŸ</h2><p>è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸ªä¸Šé¢ä¾‹å­çš„å˜ç§ï¼š</p>
<pre><code>var scope = &apos;global&apos;;
function checkscope(){
    var scope = &apos;local&apos;;
    return scope;
}
var result = checkscope();
console.log(result);
</code></pre><p>è¿™ä¸ªå¯èƒ½å¤§å®¶éƒ½èƒ½è¯´å‡ºæ¥æ˜¯localï¼Œæ˜¯çš„æ²¡é”™ï¼Œè·Ÿå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒJSä¹Ÿåˆ†å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥äº†è§£ä½œç”¨åŸŸè¿™ä¸ªæ¦‚å¿µï¼Œåœ¨JSä¸­ä¸€ä¸ªå˜é‡çš„ä½œç”¨åŸŸæ˜¯ç¨‹åºæºä»£ç ä¸­å®šä¹‰è¿™ä¸ªå˜é‡çš„åŒºåŸŸã€‚</p>
<p>å…¨å±€å˜é‡ç”¨äºå…¨å±€ä½œç”¨åŸŸï¼Œåœ¨JSä»£ç ä¸­çš„ä»»ä½•åœ°æ–¹éƒ½æ˜¯æœ‰å®šä¹‰çš„ã€‚ç„¶è€Œåœ¨å‡½æ•°å†…çš„å˜é‡åªåœ¨å‡½æ•°ä½“å†…æœ‰å®šä¹‰ã€‚ä»–ä»¬æ˜¯å±€éƒ¨å˜é‡ï¼Œä½œç”¨åŸŸæ˜¯å±€éƒ¨çš„ã€‚å‡½æ•°å‚æ•°ä¹Ÿæ˜¯å±€éƒ¨å˜é‡ï¼Œå®ƒä»¬åªåœ¨å‡½æ•°ä½“å†…æœ‰å®šä¹‰ã€‚</p>
<p>å¹¶ä¸”ï¼Œåœ¨å‡½æ•°ä½“å†…ï¼Œå±€éƒ¨å˜é‡çš„ä¼˜å…ˆçº§é«˜äºåŒåçš„å…¨å±€å˜é‡ã€‚å¦‚æœåœ¨å‡½æ•°ä½“å†…å£°æ˜çš„ä¸€ä¸ªå±€éƒ¨å˜é‡æˆ–è€…å‡½æ•°å‚æ•°ä¸­å¸¦æœ‰çš„å˜é‡å’Œå…¨å±€å˜é‡é‡åï¼Œé‚£ä¹ˆå…¨å±€å˜é‡å°±è¢«å±€éƒ¨å˜é‡è¦†ç›–ã€‚</p>
<p>ä¸Šé¢ä¾‹å­çš„ç»“æœå°±å‘¼ä¹‹æ¬²å‡ºäº†ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªå‘ï¼Œå½“æˆ‘ä»¬å£°æ˜å˜é‡æ—¶ï¼Œå¦‚æœæ²¡æœ‰åŠ varè¯­å¥ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å°†ä¼šæå‡ä¸ºå…¨å±€å˜é‡ï¼Œå¦‚ï¼š</p>
<pre><code>var scope = &apos;global&apos;;
function checkscope(){
    scope = &apos;local&apos;;
    return scope;
}
var result = checkscope();
console.log(result); // local
</code></pre><p>ç»“æœå˜æˆäº†localï¼Œæ‰€ä»¥å¹³æ—¶å£°æ˜å˜é‡éƒ½è¦åŠ varï¼Œä¸ç„¶ä¼šé€ æˆå¾ˆå¤šbugï¼Œæˆ–è€…åŸæœ¬æ„ä¹‰çš„åç¦»ã€‚</p>
<h2 id="2-å˜é‡å£°æ˜æå‡"><a href="#2-å˜é‡å£°æ˜æå‡" class="headerlink" title="2.å˜é‡å£°æ˜æå‡"></a>2.å˜é‡å£°æ˜æå‡</h2><p>å†æ¥çœ‹æ–‡ç« å¼€å§‹çš„ä¾‹å­ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰undefinedçš„ç»“æœå‘¢ï¼›</p>
<p>åŸæ¥JSæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼ŒJSæœ‰å‡½æ•°ä½œç”¨åŸŸï¼Œå˜é‡åœ¨å£°æ˜å®ƒä»¬çš„å‡½æ•°ä½“ä»¥åŠè¿™ä¸ªå‡½æ•°ä½“åµŒå¥—çš„ä»»æ„å‡½æ•°ä½“å†…éƒ½æ˜¯æœ‰å®šä¹‰çš„ï¼Œå³å‡½æ•°ä½“å†…çš„å£°æ˜çš„æ‰€æœ‰å˜é‡åœ¨å‡½æ•°ä½“å†…å§‹ç»ˆæ˜¯å¯è§çš„ã€‚</p>
<p>æœ‰æ„æ€çš„æ˜¯ï¼Œè¿™æ„å‘³ç€åœ¨å£°æ˜ä¹‹å‰ç”šè‡³å¯ç”¨ï¼›JSè¿™ä¸ªç‰¹æ€§è¢«ç§°ä¸ºå˜é‡å£°æ˜æå‰ï¼Œå³JSå‡½æ•°å†…å£°æ˜çš„æ‰€æœ‰å˜é‡ï¼ˆä¸æ¶‰åŠèµ‹å€¼ï¼‰éƒ½è¢«æå‰è‡³å‡½æ•°ä½“çš„é¡¶éƒ¨ï¼›è¿™æ­¥æ“ä½œæ˜¯JSå¼•æ“åœ¨é¢„ç¼–è¯‘è¿›è¡Œçš„ï¼Œæ˜¯åœ¨ä»£ç è¿è¡Œä¹‹å‰ã€‚</p>
<p>è¿™ä¸ªä¾‹å­ç­‰ä»·äºä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code>var scope = &apos;global&apos;;
function checkscope(){
    var scope;
    return scope;
    scope = &apos;local&apos;;
}
var result = checkscope();
console.log(result);
</code></pre><p>å†æ¥çœ‹è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°±çŸ¥é“ç”±äºå‡½æ•°ä½œç”¨åŸŸçš„ç‰¹æ€§ï¼Œå±€éƒ¨å˜é‡åœ¨æ•´ä¸ªå‡½æ•°ä½“å§‹ç»ˆæ˜¯æœ‰å®šä¹‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å‡½æ•°ä½“å†…å±€éƒ¨å˜é‡é®ç›–äº†åŒåå…¨å±€å˜é‡ã€‚å°½ç®¡å¦‚æ­¤ï¼Œåªæœ‰åœ¨ç¨‹åºæ‰§è¡Œåˆ°var scope = â€˜localâ€™æ—¶ï¼Œå±€éƒ¨å˜é‡æ‰è¢«çœŸæ­£èµ‹å€¼ã€‚</p>
<p>æ‰€ä»¥ç”±äºJSæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œæˆ‘ä»¬ç¼–å†™ç¨‹åºå¯ä»¥å°†å˜é‡å£°æ˜æ”¾åœ¨å‡½æ•°ä½“é¡¶éƒ¨ï¼Œè¿™æ ·åšæ³•æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ååº”çœŸå®çš„å˜é‡ä½œç”¨åŸŸï¼Œå‡å°‘bugã€‚</p>
<h2 id="3-å‡½æ•°å£°æ˜æå‡"><a href="#3-å‡½æ•°å£°æ˜æå‡" class="headerlink" title="3.å‡½æ•°å£°æ˜æå‡"></a>3.å‡½æ•°å£°æ˜æå‡</h2><p>è€è§„çŸ©ï¼Œå†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>var foo = 1;
function bar() {
    return foo;
    foo = 2;
    function foo() {return 3;}
    var foo = 4;
}
console.log(bar());
</code></pre><p>å¤§å®¶ä¼šä¸ä¼šè¯´æ˜¯undefinedå‘¢ï¼Ÿä¸æ˜¯çš„ï¼Œè¿™ä¸ªç»“æœæ˜¯<code>[function: foo]</code>,ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿ</p>
<p>åŸæ¥å‡½æ•°å£°æ˜ä¸é€šè¿‡varå£°æ˜å˜é‡ä¸€æ ·ï¼Œ<strong>å‡½æ•°å£°æ˜è¯­å¥</strong>ä¸­çš„å‡½æ•°è¢«æ˜¾å¼åœ°æå‰åˆ°è„šæœ¬æˆ–å‡½æ•°çš„é¡¶éƒ¨ï¼Œå› æ­¤å®ƒä»¬åœ¨æ•´ä¸ªè„šæœ¬å’Œå‡½æ•°å†…éƒ¨éƒ½æ˜¯å¯è§çš„ã€‚</p>
<p>ä¸å˜é‡å£°æ˜æå‰ä¸åŒçš„æ˜¯ï¼šä½¿ç”¨varçš„è¯ï¼Œåªæœ‰å˜é‡å£°æ˜æå‰ï¼Œå˜é‡çš„åˆå§‹åŒ–ä»£ç ä»ç„¶åœ¨åŸæ¥çš„ä½ç½®ã€‚ç„¶è€Œç”¨å‡½æ•°å£°æ˜è¯­å¥çš„è¯ï¼Œå‡½æ•°åç§°å’Œå‡½æ•°ä½“å‡æå‰,è„šæœ¬ä¸­çš„æ‰€æœ‰å‡½æ•°å’Œå‡½æ•°ä¸­æ‰€åµŒå¥—çš„å‡½æ•°éƒ½ä¼šåœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­å…¶å®ƒä»£ç ä¹‹å‰å£°æ˜ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦æŒ‡å®šæ˜¯å‡½æ•°å£°æ˜ä¹‹å‰å‘¢ï¼Œå› ä¸ºä½¿ç”¨å‡½æ•°å®šä¹‰è¡¨è¾¾å¼åˆ›å»ºçš„å‡½æ•°æ˜¯ä¸ä¼šæå‰çš„ï¼Œè§ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<pre><code>var foo = 1;
function bar() {
    return foo;
    foo = 2;
    var foo = function foo() {return 3;}
    var foo = 4;
}
console.log(bar()); // undefined
</code></pre><p>å…³äºå‡½æ•°å®šä¹‰è¡¨è¾¾å¼å’Œå‡½æ•°ç”Ÿå‘½è¡¨è¾¾å¼çš„è¯¦ç»†å†…å®¹ï¼Œä»¥ååœ¨æ·±å…¥ç†è§£å‡½æ•°ä¸­å†è®²ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2015/10/19/DiveIntoJs_compare/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/10/19/DiveIntoJs_compare/" itemprop="url">æ·±å…¥ç†è§£Javascriptï¼š æ¯”è¾ƒ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-10-19T00:00:00+08:00">
                2015-10-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å¼€å§‹è¿™ä¸ªä¹‹å‰æˆ‘ä»¬å…ˆçœ‹å‡ ä¸ªä¾‹å­</p>
<pre><code>var a = [1, 2]
var b = [1, 2]
a == [1, 2] // false
a == b // false

var c = {a: 1, b: 2}
var d = {a: 1, b: 2}
c == d // false

var str = &apos;test&apos;
str == &apos;test&apos; // true

str.toUpperCase() // &apos;TEST&apos;
str // &apos;test&apos;
</code></pre><p>ä¸ºä»€ä¹ˆæœ‰è¿™ç§ç°è±¡å‘ç”Ÿå‘¢ï¼Ÿ</p>
<h2 id="1-JSçš„åŸå§‹å€¼ä¸å¯¹è±¡"><a href="#1-JSçš„åŸå§‹å€¼ä¸å¯¹è±¡" class="headerlink" title="1.JSçš„åŸå§‹å€¼ä¸å¯¹è±¡"></a>1.JSçš„åŸå§‹å€¼ä¸å¯¹è±¡</h2><p>åŸæ¥JSåˆ†ä¸ºä¸¤ç§å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯åŸå§‹ç±»å‹ï¼Œæœ‰undefinedã€nullã€å¸ƒå°”å€¼ã€æ•°å­—å’Œå­—ç¬¦ä¸²ï¼›ä¸€ä¸ªæ˜¯å¯¹è±¡ç±»å‹ï¼ˆæ•°ç»„ã€å‡½æ•°ç­‰ï¼‰ï¼›</p>
<p>åŸå§‹ç±»å‹å€¼æ˜¯ä¸å¯æ›´æ”¹çš„ï¼Œä»»ä½•æ–¹æ³•éƒ½æ— æ³•æ›´æ”¹ä¸€ä¸ªåŸå§‹å€¼ï¼Œå¦‚ä¸Šé¢ä¾‹å­ä¸­strç»è¿‡è½¬æ¢å¤§å†™ä¹‹åè¿˜æ˜¯â€˜testâ€™ï¼›åŸå§‹ç±»å‹å€¼çš„æ¯”è¾ƒæ˜¯å€¼çš„æ¯”è¾ƒï¼›</p>
<p>å¯¹è±¡ç±»å‹å€¼çš„æ¯”è¾ƒå¹¶éå€¼çš„æ¯”è¾ƒï¼Œå³ä½¿ä¸¤ä¸ªå¯¹è±¡åŒ…å«åŒæ ·çš„å±æ€§åŠç›¸åŒçš„å€¼ï¼Œå¦‚ä¸Šä¾‹å­çš„aä¸bã€cä¸dçš„æ¯”è¾ƒéƒ½ä¸ºfalseï¼›</p>
<p>å¯¹è±¡çš„æ¯”è¾ƒä¸ºå¼•ç”¨çš„æ¯”è¾ƒï¼Œå½“ä¸”ä»…å½“å®ƒä»¬å¼•ç”¨åŒä¸€ä¸ªåŸºå¯¹è±¡æ—¶ï¼Œå®ƒä»¬æ‰ç›¸ç­‰ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code>var a = [1, 2]
var b = a
a == b // true
</code></pre><h2 id="2-ä¸"><a href="#2-ä¸" class="headerlink" title="2.== ä¸ ==="></a>2.<code>==</code> ä¸ <code>===</code></h2><p>å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>1 == &apos;1&apos; // true
1 === &apos;1&apos; // false
var undefined;
undefined == null; // true
1 == true;   // true
2 == true;   // false
0 == false;  // true
0 == &apos;&apos;;     // true
NaN == NaN;  // false
[] == false; // true
[] == ![];   // true
</code></pre><p>ä¸ºå•¥ä¼šæœ‰å‰é¢ä¸¤è¡Œçš„ç»“æœå‘¢ï¼Ÿ</p>
<p>åŸæ¥â€˜==â€™è¿ç®—ç¬¦ç”¨æ¥æ£€æµ‹ä¸¤ä¸ªæ“ä½œæ•°æ˜¯å¦ç›¸ç­‰ï¼Œè¿™é‡Œç›¸ç­‰çš„å®šä¹‰éå¸¸å®½æ¾ï¼Œå¯ä»¥å…è®¸è¿›è¡Œç±»å‹è½¬æ¢ï¼›</p>
<p>è€Œâ€˜===â€™è¿ç®—ç¬¦ç”¨æ¥æ£€æµ‹ä¸¤ä¸ªæ“ä½œæ•°æ˜¯å¦<strong>ä¸¥æ ¼</strong>ç›¸ç­‰ï¼Œä¼šæ¯”è¾ƒä¸¤ä¸ªæ“ä½œæ•°çš„ç±»å‹æ˜¯å¦ç›¸åŒï¼›</p>
<h3 id="è¿ç®—è§„åˆ™"><a href="#è¿ç®—è§„åˆ™" class="headerlink" title="===è¿ç®—è§„åˆ™"></a><code>===</code>è¿ç®—è§„åˆ™</h3><p>â€˜===â€™è¿ç®—ç¬¦é¦–å…ˆè®¡ç®—å…¶æ“ä½œæ•°çš„å€¼ï¼Œç„¶åæ¯”è¾ƒè¿™ä¸¤ä¸ªå€¼ï¼Œæ¯”è¾ƒè¿‡ç¨‹æ²¡æœ‰ä»»ä½•ç±»å‹è½¬æ¢ï¼›</p>
<ul>
<li><p>å¦‚æœä¸¤ä¸ªå€¼ç±»å‹ä¸åŒï¼Œè¿”å›falseï¼›</p>
</li>
<li><p>å¦‚æœä¸¤ä¸ªå€¼éƒ½ä¸ºnullæˆ–è€…undefinedï¼Œè¿”å›trueï¼›</p>
</li>
<li><p>å¦‚æœä¸¤ä¸ªå€¼éƒ½ä¸ºå¸ƒå°”å€¼trueæˆ–è€…falseï¼Œè¿”å›trueï¼›</p>
</li>
<li><p>å¦‚æœå…¶ä¸­ä¸€ä¸ªä¸ºNaN,åˆ™è¿”å›falseï¼Œå³ä½¿å¦ä¸€ä¸ªä¹Ÿä¸ºNaNï¼›</p>
</li>
<li><p>å¦‚æœä¸¤ä¸ªå€¼ä¸ºæ•°å­—ä¸”æ•°å€¼ç›¸ç­‰ï¼Œåˆ™è¿”å›trueï¼Œ0ä¸-0ä¹Ÿè¿”å›trueï¼›</p>
</li>
<li><p>å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦æˆ–è€…å†…å®¹ä¸åŒï¼Œåˆ™è¿”å›falseï¼›</p>
</li>
<li><p>å¦‚æœä¸¤ä¸ªå¼•ç”¨å€¼æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¿”å›trueï¼Œå…¶ä»–å¯¹è±¡æ¯”è¾ƒéƒ½è¿”å›falseï¼›</p>
</li>
</ul>
<h3 id="è¿ç®—è§„åˆ™-1"><a href="#è¿ç®—è§„åˆ™-1" class="headerlink" title="==è¿ç®—è§„åˆ™"></a><code>==</code>è¿ç®—è§„åˆ™</h3><p>â€˜==â€™è¿ç®—ç¬¦è·Ÿâ€˜===â€™ç±»ä¼¼ï¼Œä¸è¿‡æ¯”è¾ƒå¹¶ä¸ä¸¥æ ¼ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ç›¸åŒï¼Œåˆ™å’Œä¸Šæ–‡æ‰€è¿°çš„ä¸¥æ ¼ç›¸ç­‰çš„æ¯”è¾ƒè§„åˆ™ä¸€æ ·ï¼›</p>
<p>å¦‚æœä¸¤ä¸ªæ“ä½œæ•°ä¸æ˜¯åŒä¸€ç±»å‹ï¼Œé‚£ä¹ˆç›¸ç­‰è¿ç®—ç¬¦ä¼šå°è¯•è¿›è¡Œä¸€äº›ç±»å‹è½¬æ¢ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒï¼š</p>
<ul>
<li><p>å¦‚æœä¸€ä¸ªå€¼ä¸ºnullï¼Œå¦ä¸€ä¸ªä¸ºundefinedï¼Œåˆ™å®ƒä»¬ç›¸ç­‰ï¼›</p>
</li>
<li><p>å¦‚æœä¸€ä¸ªå€¼æ˜¯æ•°å­—ï¼Œå¦ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œå…ˆå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œç„¶åä½¿ç”¨è½¬æ¢åçš„å€¼è¿›è¡Œæ¯”è¾ƒï¼›</p>
</li>
<li><p>å¦‚æœå…¶ä¸­ä¸€ä¸ªæ˜¯trueï¼Œåˆ™å°†å…¶è½¬æ¢ä¸º1å†è¿›è¡Œæ¯”è¾ƒï¼›å¦‚æœæ˜¯falseï¼Œåˆ™è½¬æ¢ä¸º0å†è¿›è¡Œæ¯”è¾ƒï¼›</p>
</li>
<li><p>å¦‚æœä¸€ä¸ªå€¼ä¸ºå¯¹è±¡ï¼Œå¦ä¸€ä¸ªå€¼æ˜¯æ•°å­—æˆ–å­—ç¬¦ä¸²ï¼Œåˆ™ä½¿ç”¨ä¸‹ä¸€å°èŠ‚è¦è®²çš„ç±»å‹è½¬æ¢è§„åˆ™è½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œç„¶åå†è¿›è¡Œæ¯”è¾ƒï¼›å¯¹è±¡é€šè¿‡toString()æ–¹æ³•æˆ–valueOfæ–¹æ³•è½¬æ¢ä¸ºåŸå§‹å€¼ï¼›JSè¯­è¨€æ ¸å¿ƒçš„å†…ç½®ç±»é¦–å…ˆå°è¯•ä½¿ç”¨valueOf()ï¼Œå†å°è¯•toString()ï¼Œé™¤äº†æ—¥æœŸç±»ï¼Œæ—¥æœŸç±»åªä½¿ç”¨toString()è½¬æ¢ã€‚é‚£äº›ä¸æ˜¯å†…ç½®å¯¹è±¡åˆ™é€šè¿‡å„è‡ªå®ç°ä¸­å®šä¹‰çš„æ–¹æ³•è½¬æ¢ä¸ºåŸå§‹å€¼ï¼›</p>
</li>
<li><p>å…¶ä»–ä¸åŒç±»å‹ä¹‹é—´çš„æ¯”è¾ƒå‡ä¸ç›¸ç­‰ï¼›</p>
</li>
</ul>
<p>å¦‚<code>&#39;1&#39; == true</code>è¿”å›trueï¼Œå…¶ä¸­trueè½¬æ¢ä¸º1ï¼Œâ€˜1â€™è½¬æ¢ä¸º1ï¼Œå› ä¸ºä¸¤ä¸ªæ•°å­—çš„å€¼ç›¸ç­‰ï¼Œæ‰€ä»¥è¿”å›trueã€‚</p>
<h2 id="3-ç±»å‹è½¬æ¢"><a href="#3-ç±»å‹è½¬æ¢" class="headerlink" title="3.ç±»å‹è½¬æ¢"></a>3.ç±»å‹è½¬æ¢</h2><p>ç±»å‹è½¬æ¢æœ‰éšå¼å’Œæ˜¾å¼è½¬æ¢ï¼Œä¸‹å›¾ä¸ºè½¬æ¢çš„è§„åˆ™ï¼š</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/ç±»å‹è½¬æ¢.jpg" alt="http://7xj29n.com1.z0.glb.clouddn.com/ç±»å‹è½¬æ¢.jpg"></p>
<h3 id="æ˜¾ç¤ºè½¬æ¢"><a href="#æ˜¾ç¤ºè½¬æ¢" class="headerlink" title="æ˜¾ç¤ºè½¬æ¢"></a>æ˜¾ç¤ºè½¬æ¢</h3><p>åšæ˜¾ç¤ºè½¬æ¢æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨Boolean()ã€Number()ã€String()æˆ–Object()å‡½æ•°ï¼›</p>
<p>æ³¨æ„è¿™äº›å‡½æ•°ä¸å®ƒä»¬ä½œä¸ºå‡½æ•°æ„é€ å™¨æ˜¯æœ‰åŒºåˆ«çš„ï¼Œä½œä¸ºå‡½æ•°æ„é€ å™¨æ˜¯ä½¿ç”¨new Number()ï¼Œè¿™ç§å¾—å‡ºæ¥çš„æ˜¯å±äºåŒ…è£…å¯¹è±¡ï¼›</p>
<p>å¦‚ä¸‹ï¼š</p>
<pre><code>Number(&quot;3&quot;)
new Number(&quot;3&quot;)
typeof Number(&quot;3&quot;) // number
typeof new Number(&quot;3&quot;) // object
</code></pre><h3 id="éšå¼è½¬æ¢"><a href="#éšå¼è½¬æ¢" class="headerlink" title="éšå¼è½¬æ¢"></a>éšå¼è½¬æ¢</h3><p>éšå¼è½¬æ¢æ˜¯é€šè¿‡ä¸Šä¸‹è¯­å¢ƒæˆ–è€…è¿ç®—ç¬¦æ¥è½¬æ¢çš„ï¼›</p>
<p>ä¾‹å¦‚â€˜+â€™è¿ç®—ç¬¦æœ‰ä¸€ä¸ªæ“ä½œæ•°ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°ä¸ä¸ºå­—ç¬¦ä¸²æ—¶ä¼šéšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼›â€™-â€˜è¿ç®—ç¬¦ä¼šéšå¼æŠŠä¸¤ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—;</p>
<p>å†å¦‚ä¸€å…ƒè¿ç®—ç¬¦â€˜ï¼â€™ä¼šæŠŠæ“ä½œæ•°è½¬æ¢ä¸ºå¸ƒå°”å€¼å¹¶å–åï¼›å¦‚ï¼š</p>
<pre><code>12 + &apos;1&apos; // &apos;121&apos;
new Number(&quot;3&quot;) - [1] // 2
!![] // true
</code></pre><p>å¯¹åº”çš„è½¬æ¢è§„åˆ™å¦‚ä¸Šé¢å›¾ä¸­æ‰€ç¤ºï¼Œä¸‹é¢åªæ¥è¯´è¯´å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼çš„æ–¹å¼ï¼ˆ<em>è¿™é‡Œåªè°ˆåŸç”Ÿå¯¹è±¡ï¼Œè€Œéå®¿ä¸»å¯¹è±¡çš„è½¬æ¢ï¼Œå®¿ä¸»å¯¹è±¡æ ¹æ®å„è‡ªçš„ç®—æ³•è¿›è¡Œè½¬æ¢</em>ï¼‰ï¼›</p>
<p>1.å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²</p>
<ul>
<li>å¦‚æœå¯¹è±¡å…·æœ‰toString()æ–¹æ³•ï¼Œä¸”è°ƒç”¨è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™å¯¹è±¡å…ˆè½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œç„¶åå†é€šè¿‡ä¸Šå›¾çš„è½¬æ¢è§„åˆ™è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼›</li>
<li>å¦åˆ™JSä¼šè°ƒç”¨valueOf()æ–¹æ³•ï¼Œä¸”è°ƒç”¨è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™å¯¹è±¡å…ˆè½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œç„¶åå†é€šè¿‡ä¸Šå›¾çš„è½¬æ¢è§„åˆ™è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼›</li>
<li>å¦‚æœå¯¹è±¡æ— æ³•ä»ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•è·å¾—ä¸€ä¸ªåŸå§‹å€¼ï¼Œè¿™æ—¶å®ƒå°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼›</li>
</ul>
<p>ä¾‹å¦‚è®¡ç®—<code>[1, 2, 3] + &#39;abc&#39;</code>è¿”å›<code>&#39;1,2,3abc&#39;</code></p>
<p>é¦–å…ˆ<code>[1, 2, 3]</code>è°ƒç”¨<code>toString()</code>æ–¹æ³•è¿”å›<code>â€˜1,2,3â€™</code>ç„¶åå†æ‰§è¡Œå­—ç¬¦ä¸²çš„+è¿ç®—ï¼Œè¿”å›<code>&#39;1,2,3abc&#39;</code></p>
<p>2.å¯¹è±¡è½¬æ¢ä¸ºæ•°å­—</p>
<p>è¿™ä¸ªä¸ä¸Šé¢è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç›¸åï¼Œå…ˆè°ƒç”¨valueOf()ï¼Œå¤±è´¥å†å°è¯•toString()ï¼›</p>
<ul>
<li>å¦åˆ™JSä¼šè°ƒç”¨valueOf()æ–¹æ³•ï¼Œä¸”è°ƒç”¨è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™å¯¹è±¡å…ˆè½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œç„¶åå†é€šè¿‡ä¸Šå›¾çš„è½¬æ¢è§„åˆ™è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼›</li>
<li>å¦‚æœå¯¹è±¡å…·æœ‰toString()æ–¹æ³•ï¼Œä¸”è°ƒç”¨è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™å¯¹è±¡å…ˆè½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œç„¶åå†é€šè¿‡ä¸Šå›¾çš„è½¬æ¢è§„åˆ™è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼›</li>
<li>å¦‚æœå¯¹è±¡æ— æ³•ä»ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•è·å¾—ä¸€ä¸ªåŸå§‹å€¼ï¼Œè¿™æ—¶å®ƒå°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼›</li>
</ul>
<p>ä¾‹å¦‚è®¡ç®—<code>[1, 2, 3] - 1</code>è¿”å›<code>NaN</code></p>
<p>é¦–å…ˆ<code>[1, 2, 3]</code>è°ƒç”¨<code>valueOf()</code>æ–¹æ³•ï¼Œè€Œæ­¤æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯åŸå§‹å€¼ï¼Œåˆ™è°ƒç”¨<code>toString()</code>æ–¹æ³•ï¼Œè¿”å›<code>â€˜1,2,3â€™</code>ç„¶åå†è½¬æ¢ä¸ºæ•°å­—ï¼Œæ ¹æ®å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„è§„åˆ™ï¼Œä¸º<code>NaN</code>,<code>NaN - 1</code>è¿”å›<code>NaN</code>ã€‚</p>
<p>æ³¨æ„ï¼šæ—¥æœŸå¯¹è±¡æœ‰ç‚¹ç‰¹åˆ«ï¼Œé€šè¿‡valueOfå’ŒtoStringæ–¹æ³•è¿”å›çš„åŸå§‹å€¼å°†è¢«ç›´æ¥ä½¿ç”¨ï¼›</p>
<h2 id="4-åè®°"><a href="#4-åè®°" class="headerlink" title="4.åè®°"></a>4.åè®°</h2><p>é€šè¿‡ä¸Šé¢çš„ä¸€äº›ä¾‹å­æˆ‘ä»¬çŸ¥é“JSåŸå§‹ç±»å‹ä¸å¯¹è±¡ç±»å‹çš„ä¸€äº›è½¬æ¢è§„åˆ™ä»¥åŠJSçš„å†…éƒ¨å®ç°ï¼Œæœ‰æœºä¼šå†èŠèŠJSçš„å¸¸è§è¿ç®—ç¬¦ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cauil.github.io/2015/10/19/DiveIntoJs_Events_propagation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cauil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/abu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cauil's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/10/19/DiveIntoJs_Events_propagation/" itemprop="url">æ·±å…¥ç†è§£Javascriptï¼šDOMäº‹ä»¶ä¹‹äº‹ä»¶ä¼ æ’­</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-10-19T00:00:00+08:00">
                2015-10-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å®¢æˆ·ç«¯Javascriptç¨‹åºé‡‡ç”¨å¼‚æ­¥äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ¨¡å‹ã€‚</p>
<p>é‚£é¦–å…ˆä»€ä¹ˆæ˜¯å¼‚æ­¥äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ¨¡å‹å‘¢ï¼Ÿ</p>
<p>åœ¨è¿™ç§è®¾è®¡é£æ ¼ä¸‹ï¼Œå½“æ–‡æ¡£ã€æµè§ˆå™¨ã€å…ƒç´ æˆ–ä¸ä¹‹ç›¸å…³çš„å¯¹è±¡å‘ç”ŸæŸäº›æœ‰è¶£çš„äº‹æƒ…æ—¶ï¼ŒWebæµè§ˆå™¨å°±ä¼šäº§ç”Ÿäº‹ä»¶ã€‚</p>
<p>è¿™äº›å¯¹è±¡ç­‰å¾…äº‹ä»¶å‘ç”Ÿï¼Œç„¶åä»–ä»¬ç›¸åº”ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å¼‚æ­¥é©±åŠ¨é£æ ¼ã€‚</p>
<h2 id="1-äº‹ä»¶æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#1-äº‹ä»¶æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="1.äº‹ä»¶æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"></a>1.äº‹ä»¶æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</h2><p>äº‹ä»¶å°±æ˜¯Webæµè§ˆå™¨é€šçŸ¥åº”ç”¨ç¨‹åºå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ã€‚</p>
<p>äº‹ä»¶ç±»å‹ï¼šæ˜¯ä¸€ä¸ªç”¨æ¥è¯´æ˜å‘ç”Ÿä»€ä¹ˆç±»å‹äº‹ä»¶çš„å­—ç¬¦ä¸²ï¼›ä¾‹å¦‚â€˜mousemoveâ€™è¡¨ç¤ºç”¨æˆ·ç§»åŠ¨é¼ æ ‡ï¼Œç”±äºäº‹ä»¶ç±»å‹åªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæœ‰æ—¶ä¹Ÿå¯ç§°ä¸ºäº‹ä»¶åå­—ã€‚</p>
<p>äº‹ä»¶ç›®æ ‡ï¼šå‘ç”Ÿçš„äº‹ä»¶æˆ–è€…ä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ã€‚åœ¨JSåº”ç”¨ç¨‹åºä¸­ï¼ŒWindowsã€Documentã€Elementå¯¹è±¡æ˜¯æœ€å¸¸è§çš„äº‹ä»¶ç›®æ ‡ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç å°±æ˜¯å¼¹å‡ºäº‹ä»¶ç›®æ ‡ä¸ç±»å‹çš„æ–¹æ³•ï¼š</p>
<pre><code>&lt;div id=&apos;box&apos;&gt;
    &lt;button&gt;æŒ‰é’®&lt;/button&gt;
&lt;/div&gt;
&lt;script&gt;
    var bt = document.getElementsByTagName(&apos;button&apos;)[0];

    bt.addEventListener(&apos;click&apos;,function(event){
        alert(&apos;äº‹ä»¶ç›®æ ‡:&apos; + event.target);
        alert(&apos;äº‹ä»¶ç±»å‹ï¼š&apos; + event.type);
    })
&lt;/script&gt;
</code></pre><p>äº‹ä»¶å¤„ç†ç¨‹åºï¼šå¤„ç†æˆ–ç›¸åº”äº‹ä»¶çš„å‡½æ•°ã€‚å½“åœ¨ç‰¹å®šçš„äº‹ä»¶ç›®æ ‡ä¸Šå‘ç”Ÿç‰¹å®šç±»å‹çš„äº‹ä»¶æ—¶ï¼Œæµè§ˆå™¨ä¼šè°ƒç”¨å¯¹åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚</p>
<p>äº‹ä»¶å¯¹è±¡ï¼šä¸ç‰¹å®šäº‹ä»¶ç›¸å…³ä¸”åŒ…å«æœ‰å…³è¯¥äº‹ä»¶è¯¦ç»†ä¿¡æ¯çš„å¯¹è±¡ï¼›ä¾‹å¦‚ï¼Œé¼ æ ‡äº‹ä»¶çš„ç›¸å…³å¯¹è±¡ä¼šåŒ…å«é¼ æ ‡æŒ‡é’ˆçš„åæ ‡ã€‚</p>
<p>äº‹ä»¶ä¼ æ’­ï¼šæµè§ˆå™¨å†³å®šå“ªä¸ªå¯¹è±¡è§¦å‘å…¶äº‹ä»¶å¤„ç†ç¨‹åºçš„è¿‡ç¨‹ï¼š</p>
<ul>
<li>å¯¹äºå•ä¸ªå¯¹è±¡çš„ç‰¹å®šäº‹ä»¶ï¼ˆæ¯”å¦‚windowsçš„loadäº‹ä»¶ï¼‰ï¼Œå¿…é¡»æ˜¯ä¸èƒ½ä¼ æ’­çš„ï¼›</li>
<li>äº‹ä»¶ä¼ æ’­å‘ä¸Šä¼ æ’­ï¼Œå³å†’æ³¡ä¼ æ’­ï¼›</li>
<li>äº‹ä»¶å¤„ç†ç¨‹åºèƒ½å¤Ÿé€šè¿‡è°ƒç”¨æ–¹æ³•æˆ–è€…è®¾ç½®äº‹ä»¶å¯¹è±¡å±æ€§æ¥é˜»æ­¢äº‹ä»¶ä¼ æ’­ï¼Œè¿™æ ·å°±èƒ½åœæ­¢å†’æ³¡ï¼›</li>
</ul>
<p>äº‹ä»¶æ•è·ï¼šäº‹ä»¶ä¼ æ’­çš„å¦å¤–ä¸€ç§å½¢å¼ï¼Œåœ¨å®¹å™¨å…ƒç´ ä¸Šæ³¨å†Œçš„ç‰¹å®šå¤„ç†ç¨‹åºæœ‰æœºä¼šåœ¨äº‹ä»¶ä¼ æ’­åˆ°çœŸå®ç›®æ ‡ä¹‹å‰æ•è·å®ƒã€‚IE8æˆ–ä¹‹å‰çš„ç‰ˆæœ¬ä¸æ”¯æŒäº‹ä»¶æ•è·ï¼Œæ‰€ä»¥ä¸å¸¸ç”¨å®ƒã€‚</p>
<h2 id="2-äº‹ä»¶ä¼ æ’­"><a href="#2-äº‹ä»¶ä¼ æ’­" class="headerlink" title="2.äº‹ä»¶ä¼ æ’­"></a>2.äº‹ä»¶ä¼ æ’­</h2><p>ä¸Šé¢ä»‹ç»äº†ä»€ä¹ˆæ˜¯äº‹ä»¶ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»äº‹ä»¶çš„ä¼ æ’­æœºåˆ¶ï¼›</p>
<p>å½“äº‹ä»¶ç›®æ ‡æ˜¯Windowså¯¹è±¡æˆ–å…¶ä»–çš„ä¸€äº›å•ç‹¬å¯¹è±¡ï¼ˆå¦‚XMLHTTPRequestï¼‰æ—¶ï¼Œæµè§ˆå™¨ç®€å•çš„é€šè¿‡è°ƒç”¨å¯¹è±¡ä¸Šé€‚å½“çš„å¤„ç†ç¨‹åºç›¸åº”äº‹ä»¶ã€‚</p>
<p>å½“äº‹ä»¶ç›®æ ‡æ˜¯æ–‡æ¡£æˆ–è€…æ–‡æ¡£å…ƒç´ æ—¶ï¼Œæƒ…å†µä¸åŒï¼š</p>
<p>äº‹ä»¶ä¼ æ’­æœ‰ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p>æ•è·é˜¶æ®µï¼Œå‘ç”Ÿåœ¨ç›®æ ‡å¤„ç†ç¨‹åºè°ƒç”¨ä¹‹å‰ï¼Œç§°ä¸ºâ€˜æ•è·â€™é˜¶æ®µï¼Œä¸º<strong>ç¬¬ä¸€é˜¶æ®µ</strong>ï¼›</p>
<p>ç›®æ ‡å¯¹è±¡æœ¬èº«çš„æ—¶é—´å¤„ç†ç¨‹åºè°ƒç”¨æ˜¯<strong>ç¬¬äºŒä¸ªé˜¶æ®µ</strong>ï¼›</p>
<p>äº‹ä»¶å†’æ³¡æ˜¯äº‹ä»¶ä¼ æ’­çš„<strong>ç¬¬ä¸‰ä¸ªé˜¶æ®µ</strong>ï¼›</p>
<p><img src="http://7xj29n.com1.z0.glb.clouddn.com/äº‹ä»¶ä¼ æ’­.jpg" alt="http://7xj29n.com1.z0.glb.clouddn.com/äº‹ä»¶ä¼ æ’­.jpg"></p>
<h2 id="3-äº‹ä»¶å†’æ³¡"><a href="#3-äº‹ä»¶å†’æ³¡" class="headerlink" title="3.äº‹ä»¶å†’æ³¡"></a>3.äº‹ä»¶å†’æ³¡</h2><p>äº‹ä»¶æœ€å¼€å§‹ç”±å…·ä½“çš„å…ƒç´ ï¼ˆå³äº‹ä»¶å‘ç”Ÿçš„å¯¹è±¡ï¼‰æ¥å—ï¼Œç„¶åé€çº§å‘ä¸Šä¼ æ’­è‡³æœ€ä¸å…·ä½“çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>ä¸‹é¢æ˜¯htmlï¼š</p>
<pre><code>&lt;body&gt;
    &lt;div id=&apos;box&apos;&gt;
        &lt;button&gt;æŒ‰é’®&lt;/button&gt;
    &lt;/div&gt;
&lt;/body&gt;
</code></pre><p>æ¯”å¦‚å½“ç‚¹å‡»ä¸Šé¢HTMLä¸­çš„æŒ‰é’®ï¼Œäº‹ä»¶ä¼šä¸€ç›´å‘ä¸Šå†’æ³¡ï¼Œå¯»æ‰¾æ³¨å†Œäº†clinkçš„äº‹ä»¶å¤„ç†ç¨‹åºçš„å…ƒç´ ï¼š</p>
<pre><code>button --&gt;ã€€box --&gt;ã€€body --&gt; html --&gt; document root
</code></pre><h2 id="4-äº‹ä»¶æ•è·"><a href="#4-äº‹ä»¶æ•è·" class="headerlink" title="4.äº‹ä»¶æ•è·"></a>4.äº‹ä»¶æ•è·</h2><p>äº‹ä»¶æ•è·åƒåå‘çš„å†’æ³¡é˜¶æ®µï¼›æœ€å…ˆè°ƒç”¨windowså¯¹è±¡çš„æ•è·å¤„ç†ç¨‹åºï¼Œç„¶åæ˜¯Documentå¯¹è±¡çš„æ•è·å¤„ç†ç¨‹åºï¼Œæ¥ç€æ˜¯bodyå¯¹è±¡çš„ï¼Œå†ç„¶åæ˜¯DOMæ ‘å‘ä¸‹ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°è°ƒç”¨äº‹ä»¶ç›®æ ‡çš„çˆ¶å…ƒç´ çš„æ•è·äº‹ä»¶å¤„ç†ç¨‹åºã€‚</p>
<p>äº‹ä»¶æ•è·åªèƒ½ç”¨äºaddEventListener()æ³¨å†Œä¸”ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯trueçš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­ã€‚æ„å‘³ç€äº‹ä»¶æ•è·æ— æ³•åœ¨IE9ä¹‹å‰çš„IEä¸­ä½¿ç”¨ã€‚å› ä¸ºIE9ä¹‹å‰çš„IEä¸­ä¸æ”¯æŒaddEventListenerã€‚</p>
<pre><code>&lt;body&gt;
    &lt;div id=&apos;box&apos;&gt;
        &lt;button&gt;æŒ‰é’®&lt;/button&gt;
    &lt;/div&gt;
&lt;/body&gt;
</code></pre><p>å½“ç‚¹å‡»ä¸Šé¢htmlçš„æŒ‰é’®æ—¶ï¼Œäº‹ä»¶æ•è·é˜¶æ®µä¼šä»ä¸Šåˆ°ä¸‹å¯»æ‰¾æ³¨å†Œäº†clickäº‹ä»¶æ•è·å¤„ç†ç¨‹åºçš„å…ƒç´ ï¼š</p>
<pre><code>document root --&gt; html --&gt; body --&gt; box --&gt; button
</code></pre><h2 id="5-äº‹ä»¶çš„å–æ¶ˆ"><a href="#5-äº‹ä»¶çš„å–æ¶ˆ" class="headerlink" title="5.äº‹ä»¶çš„å–æ¶ˆ"></a>5.äº‹ä»¶çš„å–æ¶ˆ</h2><p>å–æ¶ˆäº‹ä»¶çš„æµè§ˆå™¨é»˜è®¤æ“ä½œæœ‰ä¸‰ç§æ–¹å¼ï¼š</p>
<ul>
<li>è®¾ç½®äº‹ä»¶å¤„ç†ç¨‹åºçš„è¿”å›å€¼ä¸ºfalseï¼›</li>
<li>åœ¨æ”¯æŒaddEventListenerçš„æµè§ˆå™¨ä¸­ï¼Œä¹Ÿèƒ½é€šè¿‡è°ƒç”¨äº‹ä»¶å¯¹è±¡çš„preventDefault()æ–¹æ³•å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º</li>
<li>åœ¨IE9ä¹‹å‰çš„IEä¸­ï¼Œå¯ä»¥è®¾ç½®äº‹ä»¶å¯¹è±¡çš„returnValueå±æ€§ä¸ºfalse</li>
</ul>
<p>å–æ¶ˆäº‹ä»¶çš„ä¼ æ’­å¯ä»¥é€šè¿‡ï¼š</p>
<ul>
<li>åœ¨æ”¯æŒaddEventListenerçš„æµè§ˆå™¨ä¸­ï¼Œä¹Ÿèƒ½é€šè¿‡è°ƒç”¨äº‹ä»¶å¯¹è±¡çš„ä¸€ä¸ªstopPropagation()æ–¹æ³•å–æ¶ˆäº‹ä»¶çš„ç»§ç»­ä¼ æ’­ï¼›å¦‚æœåœ¨åŒä¸€å¯¹è±¡ä¸Šå®šä¹‰äº†å…¶ä»–å¤„ç†ç¨‹åºï¼Œå‰©ä¸‹çš„å¤„ç†ç¨‹åºå°†ä¾æ—§è¢«è°ƒç”¨ï¼Œä½†è°ƒç”¨stopPropagationæ–¹æ³•ä¹‹åå…¶ä»–ä»»ä½•å¯¹è±¡çš„äº‹ä»¶å¤„ç†ç¨‹åºå°†ä¸ä¼šè°ƒç”¨</li>
<li>IE9ä¹‹å‰ä¸æ”¯æŒä¸Šä¸€ç§æ–¹æ³•çš„å¯ä»¥é€šè¿‡IEäº‹ä»¶å¯¹è±¡çš„cancelBubbleå±æ€§è®¾ç½®ä¸ºtrueèƒ½é˜»æ­¢äº‹ä»¶è¿›ä¸€æ­¥å†’æ³¡ï¼ˆè¿™äº›ç‰ˆæœ¬äº‹ä»¶ä¼ æ’­ä¸æ”¯æŒäº‹ä»¶çš„æ•è·é˜¶æ®µï¼‰</li>
</ul>
<h2 id="6-ç»¼åˆä¾‹å­"><a href="#6-ç»¼åˆä¾‹å­" class="headerlink" title="6.ç»¼åˆä¾‹å­"></a>6.ç»¼åˆä¾‹å­</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç»¼åˆä¾‹å­ï¼š</p>
<p>å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä¼šä¾æ¬¡å¼¹å‡ºå¯¹è¯æ¡†ï¼šâ€˜äº‹ä»¶æ•è·é˜¶æ®µbodyâ€™ã€â€˜äº‹ä»¶æ•è·é˜¶æ®µboxâ€™ã€â€˜äº‹ä»¶æ•è·é˜¶æ®µï¼šbuttonâ€™ã€â€˜äº‹ä»¶è°ƒç”¨é˜¶æ®µï¼šbuttonâ€™ã€â€˜äº‹ä»¶å†’æ³¡é˜¶æ®µï¼šboxâ€™ã€â€˜äº‹ä»¶å†’æ³¡é˜¶æ®µï¼šbodyâ€™ï¼›</p>
<p>å½“ç‚¹å‡»boxæ—¶ï¼Œä¼šä¾æ¬¡å¼¹å‡ºå¯¹è¯æ¡†ï¼šâ€˜äº‹ä»¶æ•è·é˜¶æ®µbodyâ€™ã€â€˜äº‹ä»¶æ•è·é˜¶æ®µboxâ€™ã€â€˜äº‹ä»¶å†’æ³¡é˜¶æ®µï¼šboxâ€™ã€â€˜äº‹ä»¶å†’æ³¡é˜¶æ®µï¼šbodyâ€™ï¼›</p>
<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;äº‹ä»¶æµ&lt;/title&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;style&gt;
            #box {height:100px;width: 100px;border: solid 1px red; text-align: center;background-color: burlywood}
            #button {border: solid 1px red;}
        &lt;/style&gt;
    &lt;/head&gt;

    &lt;body id=&quot;body&quot;&gt;
        &lt;div id=&quot;box&quot;&gt;box
            &lt;button id=&quot;button&quot;&gt;æŒ‰é’®&lt;/button&gt;
        &lt;/div&gt;
        &lt;script&gt;
            var bt = document.getElementById(&apos;button&apos;);
            var bx = document.getElementById(&apos;box&apos;);
            var bd = document.getElementById(&apos;body&apos;);

            bt.addEventListener(&apos;click&apos;, function(){
                alert(&quot;äº‹ä»¶æ•è·é˜¶æ®µï¼šbutton&quot;);
            }, true);
            bx.addEventListener(&apos;click&apos;, function(){
                alert(&quot;äº‹ä»¶æ•è·é˜¶æ®µbox&quot;);
            },true);
            bd.addEventListener(&apos;click&apos;, function(){
                alert(&quot;äº‹ä»¶æ•è·é˜¶æ®µbody&quot;);
                // event.stopPropagation();
            },true);

            bt.addEventListener(&apos;click&apos;, function(){
                alert(&quot;äº‹ä»¶è°ƒç”¨é˜¶æ®µï¼šbutton&quot;);
            }, false);
            bx.addEventListener(&apos;click&apos;, function(){
                alert(&quot;äº‹ä»¶å†’æ³¡é˜¶æ®µï¼šbox&quot;);
            },false);
            bd.addEventListener(&apos;click&apos;, function(){
                alert(&quot;äº‹ä»¶å†’æ³¡é˜¶æ®µï¼šbody&quot;);
            },false);
        &lt;/script&gt;
    &lt;/body&gt;

&lt;/html&gt;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/abu.jpg"
                alt="cauil" />
            
              <p class="site-author-name" itemprop="name">cauil</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/cauil" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://weibo.com/cauil" target="_blank" title="Weibo">
                    
                      <i class="fa fa-fw fa-weibo"></i>Weibo</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://douban.com/people/cauil" target="_blank" title="DouBan">
                    
                      <i class="fa fa-fw fa-douban"></i>DouBan</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cauil</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  

  

  

</body>
</html>
